{"version":3,"file":"index-8212bc6b.js","sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../src/App.jsx","../../src/main.jsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","import React, { useMemo, useState, useEffect, useRef } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { \n  Check, MapPin, Home, ListChecks, CalendarClock, MessageSquare, \n  Download, QrCode, Link2, Plus, ChevronRight, ChevronUp, ChevronDown, X, CheckCircle, \n  Clock, Phone, FileText, FolderOpen, Share2, UploadCloud, \n  Moon, Sun, Settings, Bell, Search, Filter, MoreVertical,\n  User, LogOut, HelpCircle, Info, Shield, Database, BarChart3, Target,\n  Upload, Trash2, AlertTriangle, Camera\n} from \"lucide-react\";\n\n// --- Mock Seed Data ---\nconst seedScripts = {\n  opener: [\n    {\n      id: \"op1\",\n      title: \"Door opener (15s)\",\n      content:\n        \"Hi! I'm local and helping neighbours shave a chunk off household bills‚Äîno obligation. I've popped a letter through; if you're open, I can check your postcode now and see if you qualify for the best UW bundles. Takes two minutes.\",\n    },\n    {\n      id: \"op2\",\n      title: \"Evening approach\",\n      content:\n        \"Good evening! I'm from UW and I've been helping families in this area save money on their bills. I left a letter earlier - have you had a chance to look at it?\",\n    },\n  ],\n  objection: [\n    {\n      id: \"ob1\",\n      title: \"Not interested ‚Üí graceful exit\",\n      content:\n        \"Totally fine. If things change, the letter's got a QR to a 60‚Äësecond checker‚Äîno sales calls, just the numbers. Have a great day!\",\n    },\n    {\n      id: \"ob2\",\n      title: \"Already with UW\",\n      content:\n        \"That's great! You might be eligible for additional savings or better bundles. Would you like me to check your current setup?\",\n    },\n  ],\n  closer: [\n    {\n      id: \"cl1\",\n      title: \"Soft close\",\n      content:\n        \"If you text me your postcode I'll send a quick checker link‚Äîno pressure. If it looks good, we can book a 10‚Äëminute run‚Äëthrough.\",\n    },\n    {\n      id: \"cl2\",\n      title: \"Follow-up close\",\n      content:\n        \"Perfect! I'll send you the details and we can arrange a time that works for you. When would be best?\",\n    },\n  ],\n  sms: [\n    {\n      id: \"sm1\",\n      title: \"WhatsApp Prefill CTA\",\n      content:\n        \"Hi Alex, I've got your Neighbour Letter. My postcode is _______. Can you check if I'm eligible for the best bundle?\",\n    },\n    {\n      id: \"sm2\",\n      title: \"Follow-up reminder\",\n      content:\n        \"Hi! Just following up on our conversation about UW savings. Are you still interested in checking your eligibility?\",\n    },\n  ],\n};\n\nconst seedCampaigns = [\n  {\n    id: \"c1\",\n    name: \"Elmswell NL ‚Äì Aug 2025\",\n    area: \"IP30\",\n    status: \"active\",\n    created_at: \"2025-08-01\",\n    links: {\n      connector: \"https://example.com/connector\",\n      quote: \"https://example.com/quote\",\n      booking: \"https://example.com/book\",\n      faq: \"https://example.com/faq\",\n    },\n    streets: [\n      {\n        id: \"s1\",\n        name: \"Orchard Way\",\n        postcode: \"IP30 9XX\",\n        status: \"in_progress\",\n        properties: [\n          { id: \"p1\", label: \"1\", dropped: true, knocked: true, spoke: false, result: \"no_answer\", photo: null },\n          { id: \"p2\", label: \"3\", dropped: true, knocked: true, spoke: true, result: \"maybe\", followUpAt: \"2025-08-16T18:00:00\", photo: null },\n          { id: \"p3\", label: \"5\", dropped: true, knocked: false, spoke: false, result: \"none\", photo: null },\n        ],\n      },\n      {\n        id: \"s2\",\n        name: \"Station Road\",\n        postcode: \"IP30 9YY\",\n        status: \"not_started\",\n        properties: [\n          { id: \"p4\", label: \"12\", dropped: false, knocked: false, spoke: false, result: \"none\", photo: null },\n          { id: \"p5\", label: \"14\", dropped: false, knocked: false, spoke: false, result: \"none\", photo: null },\n        ],\n      },\n    ],\n  },\n  {\n    id: \"c2\",\n    name: \"Stowmarket NL ‚Äì Sept 2025\",\n    area: \"IP14\",\n    status: \"draft\",\n    created_at: \"2025-08-15\",\n    links: {\n      connector: \"https://example.com/connector\",\n      quote: \"https://example.com/quote\",\n      booking: \"https://example.com/book\",\n      faq: \"https://example.com/faq\",\n    },\n    streets: [],\n  },\n];\n\n// Utility components\nconst Chip = ({ children, variant = \"default\", className = \"\" }) => {\n  const variants = {\n    default: \"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300\",\n    primary: \"bg-primary-100 text-primary-700 dark:bg-primary-900/40 dark:text-primary-300\",\n    success: \"bg-secondary-100 text-secondary-700 dark:bg-secondary-900/40 dark:text-secondary-300\",\n    warning: \"bg-warning-100 text-warning-700 dark:bg-warning-900/40 dark:text-warning-300\",\n    error: \"bg-error-100 text-error-700 dark:bg-error-900/40 dark:text-error-300\",\n  };\n  \n  return (\n    <span className={`inline-flex items-center text-xs px-2 py-1 rounded-full shadow-sm ${variants[variant]} ${className}`}>\n      {children}\n    </span>\n  );\n};\n\nconst SectionCard = ({ title, icon: Icon, children, actions, className = \"\" }) => (\n  <div className={`rounded-2xl shadow-soft p-4 bg-white/70 dark:bg-gray-900/70 backdrop-blur border border-gray-200/50 dark:border-gray-800/50 ${className}`}>\n    <div className=\"flex items-center justify-between mb-3\">\n      <div className=\"flex items-center gap-2\">\n        {Icon && <Icon className=\"w-5 h-5 text-primary-600\" />}\n        <h3 className=\"text-lg font-semibold\">{title}</h3>\n      </div>\n      <div className=\"flex gap-2\">{actions}</div>\n    </div>\n    {children}\n  </div>\n);\n\nconst Drawer = ({ open, onClose, title, children, size = \"default\" }) => {\n  const sizes = {\n    small: \"max-h-[60vh]\",\n    default: \"max-h-[80vh]\",\n    large: \"max-h-[90vh]\",\n  };\n  \n  return (\n    <AnimatePresence>\n      {open && (\n        <motion.div \n          className=\"fixed inset-0 z-50\" \n          initial={{ opacity: 0 }} \n          animate={{ opacity: 1 }} \n          exit={{ opacity: 0 }}\n        >\n          <div className=\"absolute inset-0 bg-black/40\" onClick={onClose} />\n          <motion.div\n            initial={{ y: \"100%\" }}\n            animate={{ y: 0 }}\n            exit={{ y: \"100%\" }}\n            transition={{ type: \"spring\", stiffness: 120, damping: 16 }}\n            className={`absolute bottom-0 left-0 right-0 bg-white dark:bg-gray-900 rounded-t-3xl p-4 ${sizes[size]} overflow-y-auto`}\n          >\n            <div className=\"flex items-center justify-between mb-3\">\n              <h3 className=\"text-base font-semibold\">{title}</h3>\n              <button \n                className=\"p-2 rounded-xl bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\" \n                onClick={onClose}\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n            {children}\n          </motion.div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n};\n\n// --- Main App ---\nexport default function App() {\n  const [dark, setDark] = useState(true);\n  const [view, setView] = useState(\"dashboard\");\n  const [campaigns, setCampaigns] = useState(seedCampaigns);\n  const [activeCampaignId, setActiveCampaignId] = useState(\"c1\");\n  const [activeStreetId, setActiveStreetId] = useState(\"s1\");\n  const [activePropertyId, setActivePropertyId] = useState(\"p2\");\n  const [showScripts, setShowScripts] = useState(false);\n  const [showLinks, setShowLinks] = useState(false);\n  const [showSettings, setShowSettings] = useState(false);\n  const [showImportModal, setShowImportModal] = useState(false);\n  const [showResetModal, setShowResetModal] = useState(false);\n  const [showNewCampaignModal, setShowNewCampaignModal] = useState(false);\n  const [showNewStreetModal, setShowNewStreetModal] = useState(false);\n  const [showImportStreetsModal, setShowImportStreetsModal] = useState(false);\n  const [showEditCampaignModal, setShowEditCampaignModal] = useState(false);\n  const [showEditStreetModal, setShowEditStreetModal] = useState(false);\n  const [showPropertyManagerModal, setShowPropertyManagerModal] = useState(false);\n  const [editingCampaign, setEditingCampaign] = useState(null);\n  const [editingStreet, setEditingStreet] = useState(null);\n  const [showHelp, setShowHelp] = useState(false);\n  const [showAbout, setShowAbout] = useState(false);\n  const [showSuccessTips, setShowSuccessTips] = useState(false);\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\n\n  // Address lookup state\n  const [addressSearchTerm, setAddressSearchTerm] = useState(\"\");\n  const [addressSuggestions, setAddressSuggestions] = useState([]);\n  const [selectedPostcode, setSelectedPostcode] = useState(\"\");\n  const [selectedTown, setSelectedTown] = useState(\"\");\n  const [availableStreets, setAvailableStreets] = useState([]);\n  const [selectedStreets, setSelectedStreets] = useState([]);\n  const [isLoadingAddresses, setIsLoadingAddresses] = useState(false);\n  const [addressLookupStep, setAddressLookupStep] = useState(\"search\"); // search, select, import\n\n  const activeCampaign = useMemo(() => campaigns.find(c => c.id === activeCampaignId), [campaigns, activeCampaignId]);\n  const activeStreet = useMemo(() => activeCampaign?.streets.find(s => s.id === activeStreetId), [activeCampaign, activeStreetId]);\n  const activeProperty = useMemo(() => activeStreet?.properties.find(p => p.id === activePropertyId), [activeStreet, activePropertyId]);\n\n  // Derived stats for dashboard\n  const stats = useMemo(() => {\n    let letters = 0, convos = 0, interested = 0, followups = 0;\n    let outcomes = {\n      interested: 0,\n      customer_signed: 0,\n      appointment_booked: 0,\n      no_for_now: 0,\n      already_uw: 0,\n      not_interested: 0\n    };\n    \n    const today = new Date().toISOString().split('T')[0]; // YYYY-MM-DD format\n    \n    activeCampaign?.streets.forEach(s => {\n      s.properties.forEach(p => {\n        // Check if activity was logged today\n        const droppedToday = p.dropped && p.droppedAt === today;\n        const spokeToday = p.spoke && p.spokeAt === today;\n        const resultToday = p.result && p.resultAt === today;\n        const followUpToday = p.followUpAt && p.followUpAt.startsWith(today);\n        \n        if (droppedToday) letters++;\n        if (spokeToday) convos++;\n        if (resultToday && (p.result === \"customer_signed\" || p.result === \"appointment_booked\")) interested++;\n        if (followUpToday) followups++;\n        \n        // Track today's outcomes\n        if (resultToday && p.result !== 'none') {\n          outcomes[p.result] = (outcomes[p.result] || 0) + 1;\n        }\n      });\n    });\n    return { letters, convos, interested, followups, outcomes };\n  }, [activeCampaign]);\n\n  const setProperty = (updates) => {\n    const today = new Date().toISOString().split('T')[0];\n    \n    setCampaigns(prev => prev.map(c => {\n      if (c.id !== activeCampaignId) return c;\n      \n      // Update the campaign's streets and properties\n      const updatedCampaign = {\n        ...c,\n        streets: c.streets.map(s => {\n          if (s.id !== activeStreetId) return s;\n          return {\n            ...s,\n            properties: s.properties.map(p => {\n              if (p.id === activePropertyId) {\n                const newUpdates = { ...updates };\n                // Add timestamp for result changes\n                if (updates.result) {\n                  newUpdates.resultAt = today;\n                }\n                // Add timestamp for followUpAt changes\n                if (updates.followUpAt) {\n                  newUpdates.followUpAt = updates.followUpAt;\n                }\n                return { ...p, ...newUpdates };\n              }\n              return p;\n            })\n          };\n        })\n      };\n      \n      // Auto-update campaign status based on activity\n      const totalProperties = updatedCampaign.streets.reduce((total, street) => total + street.properties.length, 0);\n      const droppedProperties = updatedCampaign.streets.reduce((total, street) => \n        total + street.properties.filter(p => p.dropped).length, 0);\n      const spokeProperties = updatedCampaign.streets.reduce((total, street) => \n        total + street.properties.filter(p => p.spoke).length, 0);\n      \n      let newStatus = updatedCampaign.status;\n      \n      // Update to \"active\" if any properties have any activity (dropped, knocked, or spoke)\n      const activeProperties = updatedCampaign.streets.reduce((total, street) => \n        total + street.properties.filter(p => p.dropped || p.knocked || p.spoke).length, 0);\n      \n      if (activeProperties > 0 && newStatus === \"planned\") {\n        newStatus = \"active\";\n      }\n      \n      // Update to \"completed\" if all properties have been handled (excluding no_answer as it requires follow-up)\n      const handledProperties = updatedCampaign.streets.reduce((total, street) => \n        total + street.properties.filter(p => p.result && p.result !== \"none\" && p.result !== \"no_answer\").length, 0);\n      \n      if (totalProperties > 0 && handledProperties === totalProperties) {\n        newStatus = \"completed\";\n      }\n      \n      // Also update street status\n      const updatedStreets = updatedCampaign.streets.map(street => {\n        const streetTotalProperties = street.properties.length;\n        const streetDroppedProperties = street.properties.filter(p => p.dropped).length;\n        const streetKnockedProperties = street.properties.filter(p => p.knocked).length;\n        const streetSpokeProperties = street.properties.filter(p => p.spoke).length;\n        \n        let streetStatus = street.status;\n        \n        // Check if any properties have any activity (dropped, knocked, spoke, or outcomes)\n        const streetActiveProperties = street.properties.filter(p => \n          p.dropped || p.knocked || p.spoke || (p.result && p.result !== \"none\")\n        ).length;\n        \n        // Revert to \"not_started\" if no properties have any activity\n        if (streetActiveProperties === 0) {\n          streetStatus = \"not_started\";\n        }\n        // Update to \"in_progress\" if any properties have been dropped\n        else if (streetDroppedProperties > 0 && streetStatus === \"not_started\") {\n          streetStatus = \"in_progress\";\n        }\n        \n        // Update to \"completed\" if all properties have been handled (excluding no_answer as it requires follow-up)\n        const streetHandledProperties = street.properties.filter(p => p.result && p.result !== \"none\" && p.result !== \"no_answer\").length;\n        if (streetTotalProperties > 0 && streetHandledProperties === streetTotalProperties) {\n          streetStatus = \"completed\";\n        }\n        \n        // Move back to \"in_progress\" if street was completed but now has properties without outcomes\n        if (streetStatus === \"completed\" && streetHandledProperties < streetTotalProperties) {\n          streetStatus = \"in_progress\";\n        }\n        \n        return {\n          ...street,\n          status: streetStatus\n        };\n      });\n      \n      return {\n        ...updatedCampaign,\n        streets: updatedStreets,\n        status: newStatus\n      };\n    }));\n  };\n\n  const toggleDark = () => setDark(d => !d);\n\n  // Data management functions\n  const exportData = () => {\n    const data = {\n      campaigns,\n      settings: { dark },\n      exportDate: new Date().toISOString(),\n      version: '1.0.0'\n    };\n    \n    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `uw-street-smart-data-${new Date().toISOString().split('T')[0]}.json`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n\n  const importData = (file) => {\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      try {\n        const data = JSON.parse(e.target.result);\n        if (data.campaigns && Array.isArray(data.campaigns)) {\n          setCampaigns(data.campaigns);\n          if (data.settings?.dark !== undefined) {\n            setDark(data.settings.dark);\n          }\n          setShowImportModal(false);\n          alert('Data imported successfully!');\n        } else {\n          alert('Invalid data format. Please select a valid export file.');\n        }\n      } catch (error) {\n        alert('Error importing data. Please check the file format.');\n      }\n    };\n    reader.readAsText(file);\n  };\n\n  const resetData = () => {\n    setShowResetModal(true);\n  };\n\n  const confirmReset = () => {\n    // Reset to truly empty state with just one empty campaign\n    const emptyCampaigns = [\n      {\n        id: \"new-campaign\",\n        name: \"New Campaign\",\n        area: \"\",\n        status: \"planned\",\n        created_at: new Date().toISOString().split('T')[0],\n        links: {\n          connector: \"\",\n          quote: \"\",\n          booking: \"\",\n          faq: \"\",\n        },\n        streets: [],\n      }\n    ];\n    \n    setCampaigns(emptyCampaigns);\n    setActiveCampaignId(\"new-campaign\");\n    setActiveStreetId(\"\");\n    setActivePropertyId(\"\");\n    setShowResetModal(false);\n    alert('All data has been cleared. You can now start fresh with a new campaign.');\n  };\n\n  // Campaign and Street management functions\n  const createNewCampaign = (campaignData) => {\n    const newCampaign = {\n      id: `campaign-${Date.now()}`,\n      name: campaignData.name,\n      area: campaignData.area,\n      status: \"planned\",\n      created_at: new Date().toISOString().split('T')[0],\n      links: {\n        connector: campaignData.connector || \"\",\n        quote: campaignData.quote || \"\",\n        booking: campaignData.booking || \"\",\n        faq: campaignData.faq || \"\",\n      },\n      streets: [],\n    };\n    \n    setCampaigns(prev => [...prev, newCampaign]);\n    setActiveCampaignId(newCampaign.id);\n    setShowNewCampaignModal(false);\n    alert('New campaign created successfully!');\n  };\n\n  const createNewStreet = (streetData) => {\n    const newStreet = {\n      id: `street-${Date.now()}`,\n      name: streetData.name,\n      postcode: streetData.postcode,\n      status: \"not_started\",\n      properties: streetData.properties.map((prop, index) => ({\n        id: `property-${Date.now()}-${index}`,\n        label: prop,\n        dropped: false,\n        knocked: false,\n        spoke: false,\n        result: \"none\"\n      }))\n    };\n    \n    setCampaigns(prev => prev.map(c => {\n      if (c.id === activeCampaignId) {\n        const updatedCampaign = {\n          ...c,\n          streets: [...c.streets, newStreet]\n        };\n        \n        // Auto-update campaign status to \"active\" when first street is added\n        if (c.streets.length === 0 && updatedCampaign.status === \"draft\") {\n          return {\n            ...updatedCampaign,\n            status: \"active\"\n          };\n        }\n        \n        return updatedCampaign;\n      }\n      return c;\n    }));\n    \n    setActiveStreetId(newStreet.id);\n    setShowNewStreetModal(false);\n    alert('New street added successfully!');\n  };\n\n  // Edit campaign function\n  const editCampaign = (campaignData) => {\n    setCampaigns(prev => prev.map(c => {\n      if (c.id === editingCampaign.id) {\n        return {\n          ...c,\n          name: campaignData.name,\n          area: campaignData.area,\n          links: {\n            connector: campaignData.connector || \"\",\n            quote: campaignData.quote || \"\",\n            booking: campaignData.booking || \"\",\n            faq: campaignData.faq || \"\",\n          }\n        };\n      }\n      return c;\n    }));\n    setShowEditCampaignModal(false);\n    setEditingCampaign(null);\n    alert('Campaign updated successfully!');\n  };\n\n  // Delete campaign function\n  const deleteCampaign = (campaignId) => {\n    if (confirm('Are you sure you want to delete this campaign? This action cannot be undone.')) {\n      setCampaigns(prev => prev.filter(c => c.id !== campaignId));\n      if (activeCampaignId === campaignId) {\n        const remainingCampaigns = campaigns.filter(c => c.id !== campaignId);\n        if (remainingCampaigns.length > 0) {\n          setActiveCampaignId(remainingCampaigns[0].id);\n        } else {\n          setActiveCampaignId(\"\");\n        }\n      }\n      alert('Campaign deleted successfully!');\n    }\n  };\n\n  // Edit street function\n  const editStreet = (streetData) => {\n    setCampaigns(prev => prev.map(c => {\n      if (c.id === activeCampaignId) {\n        return {\n          ...c,\n          streets: c.streets.map(s => {\n            if (s.id === editingStreet.id) {\n              return {\n                ...s,\n                name: streetData.name,\n                postcode: streetData.postcode\n              };\n            }\n            return s;\n          })\n        };\n      }\n      return c;\n    }));\n    setShowEditStreetModal(false);\n    setEditingStreet(null);\n    alert('Street updated successfully!');\n  };\n\n  // Delete street function\n  const deleteStreet = (streetId) => {\n    if (confirm('Are you sure you want to delete this street? This action cannot be undone.')) {\n      setCampaigns(prev => prev.map(c => {\n        if (c.id === activeCampaignId) {\n          return {\n            ...c,\n            streets: c.streets.filter(s => s.id !== streetId)\n          };\n        }\n        return c;\n      }));\n      if (activeStreetId === streetId) {\n        const activeCampaign = campaigns.find(c => c.id === activeCampaignId);\n        const remainingStreets = activeCampaign?.streets.filter(s => s.id !== streetId) || [];\n        if (remainingStreets.length > 0) {\n          setActiveStreetId(remainingStreets[0].id);\n        } else {\n          setActiveStreetId(\"\");\n        }\n      }\n      alert('Street deleted successfully!');\n    }\n  };\n\n  // Property management functions\n  const addProperty = (propertyLabel) => {\n    const newProperty = {\n      id: `property-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n      label: propertyLabel,\n      dropped: false,\n      knocked: false,\n      spoke: false,\n      result: \"none\",\n      photo: null,\n      droppedAt: null,\n      knockedAt: null,\n      spokeAt: null,\n      resultAt: null\n    };\n    \n    setCampaigns(prev => prev.map(c => {\n      if (c.id === activeCampaignId) {\n        // Update the campaign's streets and properties\n        const updatedCampaign = {\n          ...c,\n          streets: c.streets.map(s => {\n            if (s.id === activeStreetId) {\n              const updatedStreet = {\n                ...s,\n                properties: [...s.properties, newProperty]\n              };\n              \n              // If street was completed and we're adding a new property, move back to in_progress\n              if (s.status === \"completed\") {\n                updatedStreet.status = \"in_progress\";\n              }\n              \n              return updatedStreet;\n            }\n            return s;\n          })\n        };\n        \n        // Auto-update campaign status based on activity\n        const totalProperties = updatedCampaign.streets.reduce((total, street) => total + street.properties.length, 0);\n        const droppedProperties = updatedCampaign.streets.reduce((total, street) => \n          total + street.properties.filter(p => p.dropped).length, 0);\n        \n        let newStatus = updatedCampaign.status;\n        \n        // Update to \"active\" if any properties have been dropped\n        // Update to \"active\" if any properties have any activity (dropped, knocked, or spoke)\n        const activeProperties = updatedCampaign.streets.reduce((total, street) => \n          total + street.properties.filter(p => p.dropped || p.knocked || p.spoke).length, 0);\n        \n        if (activeProperties > 0 && newStatus === \"planned\") {\n          newStatus = \"active\";\n        }\n        \n        // Update to \"completed\" if all properties have been handled (excluding no_answer as it requires follow-up)\n        const handledProperties = updatedCampaign.streets.reduce((total, street) => \n          total + street.properties.filter(p => p.result && p.result !== \"none\" && p.result !== \"no_answer\").length, 0);\n        \n        if (totalProperties > 0 && handledProperties === totalProperties) {\n          newStatus = \"completed\";\n        }\n        \n        // Also update street status\n        const updatedStreets = updatedCampaign.streets.map(street => {\n          const streetTotalProperties = street.properties.length;\n          const streetDroppedProperties = street.properties.filter(p => p.dropped).length;\n          const streetKnockedProperties = street.properties.filter(p => p.knocked).length;\n          const streetSpokeProperties = street.properties.filter(p => p.spoke).length;\n          \n          let streetStatus = street.status;\n          \n          // Check if any properties have any activity (dropped, knocked, spoke, or outcomes)\n          const streetActiveProperties = street.properties.filter(p => \n            p.dropped || p.knocked || p.spoke || (p.result && p.result !== \"none\")\n          ).length;\n          \n          // Revert to \"not_started\" if no properties have any activity\n          if (streetActiveProperties === 0) {\n            streetStatus = \"not_started\";\n          }\n          // Update to \"in_progress\" if any properties have been dropped\n          else if (streetDroppedProperties > 0 && streetStatus === \"not_started\") {\n            streetStatus = \"in_progress\";\n          }\n          \n          // Update to \"completed\" if all properties have been handled (excluding no_answer as it requires follow-up)\n          const streetHandledProperties = street.properties.filter(p => p.result && p.result !== \"none\" && p.result !== \"no_answer\").length;\n          if (streetTotalProperties > 0 && streetHandledProperties === streetTotalProperties) {\n            streetStatus = \"completed\";\n          }\n          \n          // Move back to \"in_progress\" if street was completed but now has properties without outcomes\n          if (streetStatus === \"completed\" && streetHandledProperties < streetTotalProperties) {\n            streetStatus = \"in_progress\";\n          }\n          \n          return {\n            ...street,\n            status: streetStatus\n          };\n        });\n        \n        return {\n          ...updatedCampaign,\n          streets: updatedStreets,\n          status: newStatus\n        };\n      }\n      return c;\n    }));\n  };\n\n  const removeProperty = (propertyId) => {\n    if (confirm('Are you sure you want to remove this property?')) {\n      setCampaigns(prev => prev.map(c => {\n        if (c.id === activeCampaignId) {\n          return {\n            ...c,\n            streets: c.streets.map(s => {\n              if (s.id === activeStreetId) {\n                return {\n                  ...s,\n                  properties: s.properties.filter(p => p.id !== propertyId)\n                };\n              }\n              return s;\n            })\n          };\n        }\n        return c;\n      }));\n    }\n  };\n\n  const editPropertyLabel = (propertyId, newLabel) => {\n    setCampaigns(prev => prev.map(c => {\n      if (c.id === activeCampaignId) {\n        return {\n          ...c,\n          streets: c.streets.map(s => {\n            if (s.id === activeStreetId) {\n              return {\n                ...s,\n                properties: s.properties.map(p => {\n                  if (p.id === propertyId) {\n                    return { ...p, label: newLabel };\n                  }\n                  return p;\n                })\n              };\n            }\n            return s;\n          })\n        };\n      }\n      return c;\n    }));\n  };\n\n  // Toggle property status (allows removing status)\n  const togglePropertyStatus = (propertyId, status) => {\n    const today = new Date().toISOString().split('T')[0];\n    \n    setCampaigns(prev => prev.map(c => {\n      if (c.id !== activeCampaignId) return c;\n      \n      // Update the campaign's streets and properties\n      const updatedCampaign = {\n        ...c,\n        streets: c.streets.map(s => {\n          if (s.id !== activeStreetId) return s;\n          return {\n            ...s,\n            properties: s.properties.map(p => {\n              if (p.id === propertyId) {\n                const newValue = !p[status];\n                const timestampKey = `${status}At`;\n                return { \n                  ...p, \n                  [status]: newValue,\n                  [timestampKey]: newValue ? today : null // Set timestamp when enabling, clear when disabling\n                };\n              }\n              return p;\n            })\n          };\n        })\n      };\n      \n      // Auto-update campaign status based on activity\n      const totalProperties = updatedCampaign.streets.reduce((total, street) => total + street.properties.length, 0);\n      const droppedProperties = updatedCampaign.streets.reduce((total, street) => \n        total + street.properties.filter(p => p.dropped).length, 0);\n      const spokeProperties = updatedCampaign.streets.reduce((total, street) => \n        total + street.properties.filter(p => p.spoke).length, 0);\n      \n      let newStatus = updatedCampaign.status;\n      \n      // Update to \"active\" if any properties have been dropped\n              // Update to \"active\" if any properties have any activity (dropped, knocked, or spoke)\n        const activeProperties = updatedCampaign.streets.reduce((total, street) => \n          total + street.properties.filter(p => p.dropped || p.knocked || p.spoke).length, 0);\n        \n        if (activeProperties > 0 && newStatus === \"planned\") {\n          newStatus = \"active\";\n        }\n      \n      // Update to \"completed\" if all properties have been handled (excluding no_answer as it requires follow-up)\n      const handledProperties = updatedCampaign.streets.reduce((total, street) => \n        total + street.properties.filter(p => p.result && p.result !== \"none\" && p.result !== \"no_answer\").length, 0);\n      \n      if (totalProperties > 0 && handledProperties === totalProperties) {\n        newStatus = \"completed\";\n      }\n      \n      // Also update street status\n      const updatedStreets = updatedCampaign.streets.map(street => {\n        const streetTotalProperties = street.properties.length;\n        const streetDroppedProperties = street.properties.filter(p => p.dropped).length;\n        const streetKnockedProperties = street.properties.filter(p => p.knocked).length;\n        const streetSpokeProperties = street.properties.filter(p => p.spoke).length;\n        \n        let streetStatus = street.status;\n        \n        // Check if any properties have any activity (dropped, knocked, spoke, or outcomes)\n        const streetActiveProperties = street.properties.filter(p => \n          p.dropped || p.knocked || p.spoke || (p.result && p.result !== \"none\")\n        ).length;\n        \n        // Revert to \"not_started\" if no properties have any activity\n        if (streetActiveProperties === 0) {\n          streetStatus = \"not_started\";\n        }\n        // Update to \"in_progress\" if any properties have been dropped\n        else if (streetDroppedProperties > 0 && streetStatus === \"not_started\") {\n          streetStatus = \"in_progress\";\n        }\n        \n        // Update to \"completed\" if all properties have been handled (excluding no_answer as it requires follow-up)\n        const streetHandledProperties = street.properties.filter(p => p.result && p.result !== \"none\" && p.result !== \"no_answer\").length;\n        if (streetTotalProperties > 0 && streetHandledProperties === streetTotalProperties) {\n          streetStatus = \"completed\";\n        }\n        \n        // Move back to \"in_progress\" if street was completed but now has properties without outcomes\n        if (streetStatus === \"completed\" && streetHandledProperties < streetTotalProperties) {\n          streetStatus = \"in_progress\";\n        }\n        \n        return {\n          ...street,\n          status: streetStatus\n        };\n      });\n      \n      return {\n        ...updatedCampaign,\n        streets: updatedStreets,\n        status: newStatus\n      };\n    }));\n  };\n\n  // Address lookup functions\n  const searchAddresses = async (searchTerm) => {\n    if (!searchTerm || searchTerm.length < 3) {\n      setAddressSuggestions([]);\n      return;\n    }\n\n    setIsLoadingAddresses(true);\n    try {\n      // Use the broader postcode search (works for both postcodes and place names)\n      const response = await fetch(`https://api.postcodes.io/postcodes?q=${encodeURIComponent(searchTerm)}`);\n      if (response.ok) {\n        const data = await response.json();\n        if (data.result && data.result.length > 0) {\n          // Format the results to show postcode and area information\n          const formattedSuggestions = data.result.map(item => ({\n            display: `${item.postcode} - ${item.admin_district || item.admin_ward || item.parish || 'Unknown area'}`,\n            value: item.postcode,\n            postcode: item.postcode,\n            admin_district: item.admin_district,\n            admin_ward: item.admin_ward,\n            parish: item.parish\n          }));\n          setAddressSuggestions(formattedSuggestions);\n          return;\n        }\n      }\n      \n      setAddressSuggestions([]);\n    } catch (error) {\n      console.error('Error searching addresses:', error);\n      setAddressSuggestions([]);\n    } finally {\n      setIsLoadingAddresses(false);\n    }\n  };\n\n  const selectAddress = async (suggestion) => {\n    // Handle both string postcodes and object suggestions\n    const postcode = typeof suggestion === 'string' ? suggestion : suggestion.postcode || suggestion.value;\n    setSelectedPostcode(postcode);\n    setIsLoadingAddresses(true);\n    \n    try {\n      // Get postcode details\n      const response = await fetch(`https://api.postcodes.io/postcodes/${postcode}`);\n      if (response.ok) {\n        const data = await response.json();\n        setSelectedTown(data.result.admin_district || data.result.admin_ward || 'Unknown');\n        \n        // Get streets for this postcode using the correct endpoint\n        const streetsResponse = await fetch(`https://api.postcodes.io/postcodes/${postcode}/autocomplete`);\n        if (streetsResponse.ok) {\n          const streetsData = await streetsResponse.json();\n          // The autocomplete endpoint returns street names for the postcode\n          const streets = streetsData.result || [];\n          setAvailableStreets(streets);\n          setAddressLookupStep(\"select\");\n        } else {\n          // Fallback: create some generic street names if API fails\n          setAvailableStreets(['High Street', 'Main Street', 'Church Street', 'Station Road']);\n          setAddressLookupStep(\"select\");\n        }\n      }\n    } catch (error) {\n      console.error('Error getting address details:', error);\n      // Fallback: create some generic street names if API fails\n      setAvailableStreets(['High Street', 'Main Street', 'Church Street', 'Station Road']);\n      setAddressLookupStep(\"select\");\n    } finally {\n      setIsLoadingAddresses(false);\n    }\n  };\n\n  const toggleStreetSelection = (street) => {\n    setSelectedStreets(prev => {\n      const isSelected = prev.some(s => s === street);\n      if (isSelected) {\n        return prev.filter(s => s !== street);\n      } else {\n        return [...prev, street];\n      }\n    });\n  };\n\n  const importSelectedStreets = () => {\n    const newStreets = selectedStreets.map((streetName, index) => ({\n      id: `street-${Date.now()}-${index}`,\n      name: streetName,\n      postcode: selectedPostcode,\n      status: \"not_started\",\n      properties: [\n        // Generate some default properties (1, 3, 5, etc.)\n        { id: `property-${Date.now()}-${index}-1`, label: \"1\", dropped: false, knocked: false, spoke: false, result: \"none\" },\n        { id: `property-${Date.now()}-${index}-3`, label: \"3\", dropped: false, knocked: false, spoke: false, result: \"none\" },\n        { id: `property-${Date.now()}-${index}-5`, label: \"5\", dropped: false, knocked: false, spoke: false, result: \"none\" },\n      ]\n    }));\n\n    // Add streets to the current campaign\n    setCampaigns(prev => prev.map(c => {\n      if (c.id === activeCampaignId) {\n        return {\n          ...c,\n          streets: [...c.streets, ...newStreets]\n        };\n      }\n      return c;\n    }));\n\n    // Reset address lookup state\n    setAddressSearchTerm(\"\");\n    setAddressSuggestions([]);\n    setSelectedPostcode(\"\");\n    setSelectedTown(\"\");\n    setAvailableStreets([]);\n    setSelectedStreets([]);\n    setAddressLookupStep(\"search\");\n\n    alert(`Successfully imported ${newStreets.length} streets!`);\n    \n    // Close the import modal if it's open\n    setShowImportStreetsModal(false);\n  };\n\n  const resetAddressLookup = () => {\n    setAddressSearchTerm(\"\");\n    setAddressSuggestions([]);\n    setSelectedPostcode(\"\");\n    setSelectedTown(\"\");\n    setAvailableStreets([]);\n    setSelectedStreets([]);\n    setAddressLookupStep(\"search\");\n  };\n\n  // Online/offline detection\n  useEffect(() => {\n    const handleOnline = () => setIsOnline(true);\n    const handleOffline = () => setIsOnline(false);\n\n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n\n    return () => {\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n    };\n  }, []);\n\n  // Theme management\n  useEffect(() => {\n    document.documentElement.classList.toggle('dark', dark);\n    document.documentElement.setAttribute('data-theme', dark ? 'dark' : 'light');\n  }, [dark]);\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 dark:from-gray-950 dark:to-gray-900 text-gray-900 dark:text-gray-50 overflow-x-hidden\">\n      {/* Top Bar */}\n      <div className=\"sticky top-0 z-40 backdrop-blur bg-white/60 dark:bg-gray-950/60 border-b border-gray-200/50 dark:border-gray-800/50\">\n        <div className=\"max-w-6xl mx-auto px-3 sm:px-4 py-3 flex items-center justify-between\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-9 h-9 rounded-2xl bg-primary-600 flex items-center justify-center shadow text-white font-bold\">UW</div>\n            <div>\n              <div className=\"font-semibold leading-tight\">Street Smart</div>\n              <div className=\"text-xs opacity-70\">NL Activity Tracker</div>\n            </div>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            {/* Mobile: Simplified status indicators */}\n            <div className=\"lg:hidden flex items-center gap-1\">\n              {!isOnline && (\n                <div className=\"w-2 h-2 rounded-full bg-yellow-500\"></div>\n              )}\n            </div>\n            \n            {/* Desktop: Full status chips */}\n            <div className=\"hidden lg:flex items-center gap-2\">\n              {!isOnline && (\n                <Chip variant=\"warning\" className=\"text-xs\">\n                  <Clock className=\"w-3 h-3 mr-1\" />\n                  Offline\n                </Chip>\n              )}\n              <Chip variant=\"success\" className=\"text-xs\">\n                <Database className=\"w-3 h-3 mr-1\" />\n                Local storage\n              </Chip>\n            </div>\n            \n            <button \n              onClick={toggleDark} \n              className=\"p-2 rounded-xl bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\"\n            >\n              {dark ? <Sun className=\"w-4 h-4 lg:w-5 lg:h-5\"/> : <Moon className=\"w-4 h-4 lg:w-5 lg:h-5\"/>}\n            </button>\n            <button \n              onClick={() => setShowHelp(true)}\n              className=\"p-2 rounded-xl bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\"\n            >\n              <HelpCircle className=\"w-4 h-4 lg:w-5 lg:h-5\" />\n            </button>\n            <button \n              onClick={() => setShowSettings(true)}\n              className=\"p-2 rounded-xl bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\"\n            >\n              <Settings className=\"w-4 h-4 lg:w-5 lg:h-5\" />\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Mobile Navigation Bar */}\n      <div className=\"lg:hidden sticky top-16 z-30 bg-white/80 dark:bg-gray-950/80 backdrop-blur border-b border-gray-200/50 dark:border-gray-800/50\">\n        <div className=\"max-w-6xl mx-auto px-3 sm:px-4 py-2\">\n          <div className=\"grid grid-cols-4 gap-1\">\n            <NavButton icon={<BarChart3 className=\"w-4 h-4 flex-shrink-0\"/>} label=\"Dashboard\" active={view === \"dashboard\"} onClick={() => setView(\"dashboard\")} />\n            <NavButton icon={<Target className=\"w-4 h-4 flex-shrink-0\"/>} label=\"Campaigns\" active={view === \"campaigns\"} onClick={() => setView(\"campaigns\")} />\n            <NavButton icon={<MapPin className=\"w-4 h-4 flex-shrink-0\"/>} label=\"Streets\" active={view === \"streets\"} onClick={() => setView(\"streets\")} />\n            <NavButton icon={<FileText className=\"w-4 h-4 flex-shrink-0\"/>} label=\"Reports\" active={view === \"reports\"} onClick={() => setView(\"reports\")} />\n          </div>\n          {activeCampaign && (\n            <div className=\"mt-2 text-center px-2\">\n              <div className=\"text-xs opacity-70 mb-1\">Active Campaign</div>\n              <div className=\"text-sm font-medium truncate bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300 px-2 py-1 rounded-lg\">\n                {activeCampaign.name}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Content Area */}\n      <div className=\"max-w-7xl mx-auto px-3 sm:px-4 py-3 lg:py-6 grid grid-cols-1 lg:grid-cols-4 gap-4 lg:gap-6\">\n        {/* Sidebar - Hidden on mobile */}\n        <div className=\"hidden lg:block lg:col-span-1 space-y-3\">\n          <SectionCard title=\"Navigate\" icon={FolderOpen}>\n            <div className=\"grid grid-cols-2 gap-2 min-w-0\">\n              <NavButton icon={<BarChart3 className=\"w-4 h-4 flex-shrink-0\"/>} label=\"Dashboard\" active={view === \"dashboard\"} onClick={() => setView(\"dashboard\")} />\n              <NavButton icon={<Target className=\"w-4 h-4 flex-shrink-0\"/>} label=\"Campaigns\" active={view === \"campaigns\"} onClick={() => setView(\"campaigns\")} />\n              <NavButton icon={<MapPin className=\"w-4 h-4 flex-shrink-0\"/>} label=\"Streets\" active={view === \"streets\"} onClick={() => setView(\"streets\")} />\n              <NavButton icon={<FileText className=\"w-4 h-4 flex-shrink-0\"/>} label=\"Reports\" active={view === \"reports\"} onClick={() => setView(\"reports\")} />\n            </div>\n            <div className=\"mt-3 text-xs opacity-70\">\n              Active: <strong>{activeCampaign?.name}</strong>\n            </div>\n          </SectionCard>\n\n          <SectionCard title=\"Quick Drawers\" icon={Share2}>\n            <div className=\"grid grid-cols-2 gap-2 min-w-0\">\n              <NavButton icon={<MessageSquare className=\"w-4 h-4 flex-shrink-0\"/>} label=\"Scripts\" onClick={() => setShowScripts(true)} />\n              <NavButton icon={<Link2 className=\"w-4 h-4 flex-shrink-0\"/>} label=\"Links\" onClick={() => setShowLinks(true)} />\n            </div>\n            <div className=\"mt-3 text-xs opacity-70\">\n              Open while on a property to speed up calls and messages.\n            </div>\n          </SectionCard>\n\n          <SectionCard \n            title=\"Success Tips\" \n            icon={Target}\n            actions={\n              <button \n                onClick={() => setShowSuccessTips(true)}\n                className=\"px-3 py-1.5 rounded-xl bg-primary-600 text-white text-sm flex items-center gap-2 hover:bg-primary-700 transition-colors\"\n              >\n                <HelpCircle className=\"w-4 h-4\"/> View All\n              </button>\n            }\n          >\n            <div className=\"space-y-2\">\n              <div className=\"p-2 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800\">\n                <div className=\"text-xs font-medium text-green-800 dark:text-green-200\">üéØ Best Time to Drop</div>\n                <div className=\"text-xs text-green-700 dark:text-green-300\">Evenings 6-8pm, weekends 10am-2pm</div>\n              </div>\n              <div className=\"p-2 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800\">\n                <div className=\"text-xs font-medium text-blue-800 dark:text-blue-200\">üìù Follow Up Timing</div>\n                <div className=\"text-xs text-blue-700 dark:text-blue-300\">Return 2-3 days after dropping letters</div>\n              </div>\n              <div className=\"p-2 rounded-lg bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800\">\n                <div className=\"text-xs font-medium text-purple-800 dark:text-purple-200\">üí° Conversation Starters</div>\n                <div className=\"text-xs text-purple-700 dark:text-purple-300\">\"Hi, I'm local and helping neighbours save money...\"</div>\n              </div>\n            </div>\n          </SectionCard>\n        </div>\n\n        {/* Main Panel */}\n        <div className=\"col-span-1 lg:col-span-3 space-y-3 lg:space-y-4\">\n          {view === \"dashboard\" && <Dashboard stats={stats} activeCampaign={activeCampaign} onGoStreets={() => setView(\"streets\")} />}\n          {view === \"campaigns\" && (\n            <Campaigns \n              campaigns={campaigns} \n              activeId={activeCampaignId} \n              onSelect={(id)=>{setActiveCampaignId(id); setView(\"streets\");}} \n              onCreateNew={() => setShowNewCampaignModal(true)}\n              onEdit={(campaign) => {\n                setEditingCampaign(campaign);\n                setShowEditCampaignModal(true);\n              }}\n              onDelete={deleteCampaign}\n              onToggleComplete={(campaignId) => {\n                setCampaigns(prev => prev.map(campaign => {\n                  if (campaign.id === campaignId) {\n                    const newStatus = campaign.status === 'completed' ? 'active' : 'completed';\n                    \n                    // If marking as completed, set properties without outcomes to \"No Answer\"\n                    if (newStatus === 'completed') {\n                      const updatedStreets = campaign.streets.map(street => ({\n                        ...street,\n                        properties: street.properties.map(property => {\n                          // Only set to \"No Answer\" if property has no outcome\n                          if (property.result === 'none' || !property.result) {\n                            return { ...property, result: 'no_answer' };\n                          }\n                          return property;\n                        })\n                      }));\n                      return { ...campaign, streets: updatedStreets, status: newStatus };\n                    } else {\n                      // If unmarking as completed, clear outcomes for properties that need follow-up\n                      const updatedStreets = campaign.streets.map(street => ({\n                        ...street,\n                        properties: street.properties.map(property => {\n                          // Clear \"No Answer\" outcome if property doesn't have \"Spoke\" status\n                          // (meaning it was auto-set when marking complete, not manually set)\n                          if (property.result === 'no_answer' && !property.spoke) {\n                            return { ...property, result: 'none' };\n                          }\n                          return property;\n                        })\n                      }));\n                      return { ...campaign, streets: updatedStreets, status: newStatus };\n                    }\n                  }\n                  return campaign;\n                }));\n              }}\n            />\n          )}\n          {view === \"streets\" && activeCampaign && (\n            <Streets\n              campaign={activeCampaign}\n              activeStreetId={activeStreetId}\n              onSelectStreet={(id)=>{setActiveStreetId(id); setView(\"streets\");}}\n              onOpenProperty={(streetId, propId)=>{setActiveStreetId(streetId); setActivePropertyId(propId); setView(\"property\");}}\n              onAddStreet={() => setShowNewStreetModal(true)}\n              onEditStreet={(street) => {\n                setEditingStreet(street);\n                setShowEditStreetModal(true);\n              }}\n              onDeleteStreet={deleteStreet}\n              onManageProperties={(street) => {\n                setActiveStreetId(street.id);\n                setShowPropertyManagerModal(true);\n              }}\n              onImportStreets={(campaignId) => {\n                setActiveCampaignId(campaignId);\n                setShowImportStreetsModal(true);\n              }}\n            />\n          )}\n          {view === \"property\" && activeStreet && activeProperty && (\n            <PropertyView\n              street={activeStreet}\n              property={activeProperty}\n              onBack={()=>setView(\"streets\")}\n              onUpdate={setProperty}\n              onShowScripts={()=>setShowScripts(true)}\n              onShowLinks={()=>setShowLinks(true)}\n              onToggleStatus={togglePropertyStatus}\n            />\n          )}\n          {view === \"reports\" && <Reports campaigns={campaigns} />}\n        </div>\n      </div>\n\n      {/* Drawers */}\n      <Drawer open={showScripts} onClose={()=>setShowScripts(false)} title=\"Scripts & Talking Points\">\n        <ScriptsPanel />\n      </Drawer>\n      <Drawer open={showLinks} onClose={()=>setShowLinks(false)} title=\"Quick Links\">\n        <LinksPanel links={activeCampaign?.links} />\n      </Drawer>\n      <Drawer open={showSettings} onClose={()=>setShowSettings(false)} title=\"Settings\" size=\"small\">\n        <SettingsPanel \n          dark={dark} \n          onToggleDark={toggleDark} \n          onExport={exportData}\n          onImport={importData}\n          onReset={resetData}\n        />\n      </Drawer>\n\n      {/* Help Modal */}\n      <Drawer open={showHelp} onClose={()=>setShowHelp(false)} title=\"Help & FAQ\" size=\"large\">\n        <HelpPanel />\n      </Drawer>\n\n      {/* About Modal */}\n      <Drawer open={showAbout} onClose={()=>setShowAbout(false)} title=\"About\" size=\"small\">\n        <AboutPanel />\n      </Drawer>\n\n      {/* Success Tips Modal */}\n      <Drawer open={showSuccessTips} onClose={()=>setShowSuccessTips(false)} title=\"Success Tips for NLs\" size=\"large\">\n        <SuccessTipsPanel />\n      </Drawer>\n\n      {/* Reset Confirmation Modal */}\n      <Drawer open={showResetModal} onClose={()=>setShowResetModal(false)} title=\"Reset Data\" size=\"small\">\n        <div className=\"space-y-4\">\n          <div className=\"flex items-center gap-3 p-3 bg-red-50 dark:bg-red-900/20 rounded-xl border border-red-200 dark:border-red-800\">\n            <AlertTriangle className=\"w-5 h-5 text-red-600 dark:text-red-400\" />\n            <div className=\"text-sm\">\n              <div className=\"font-medium text-red-800 dark:text-red-200\">Warning</div>\n              <div className=\"text-red-600 dark:text-red-400\">This action cannot be undone.</div>\n            </div>\n          </div>\n          \n          <div className=\"text-sm\">\n            <p className=\"mb-3\">Are you sure you want to reset all data? This will:</p>\n            <ul className=\"space-y-1 text-gray-600 dark:text-gray-400\">\n              <li>‚Ä¢ Remove all campaigns and activity data</li>\n              <li>‚Ä¢ Reset to empty state with one new campaign</li>\n              <li>‚Ä¢ Clear all progress and follow-ups</li>\n            </ul>\n          </div>\n\n          <div className=\"flex gap-3\">\n            <button \n              onClick={confirmReset}\n              className=\"flex-1 px-4 py-2 rounded-xl bg-red-600 text-white text-sm hover:bg-red-700 transition-colors\"\n            >\n              Yes, Reset All Data\n            </button>\n            <button \n              onClick={() => setShowResetModal(false)}\n              className=\"flex-1 px-4 py-2 rounded-xl bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\"\n            >\n              Cancel\n            </button>\n          </div>\n        </div>\n      </Drawer>\n\n      {/* New Campaign Modal */}\n      <Drawer open={showNewCampaignModal} onClose={()=>setShowNewCampaignModal(false)} title=\"Create New Campaign\" size=\"small\">\n        <NewCampaignForm \n          onSubmit={createNewCampaign} \n          onCancel={() => setShowNewCampaignModal(false)}\n          addressSearchTerm={addressSearchTerm}\n          setAddressSearchTerm={setAddressSearchTerm}\n          addressSuggestions={addressSuggestions}\n          selectedPostcode={selectedPostcode}\n          selectedTown={selectedTown}\n          availableStreets={availableStreets}\n          selectedStreets={selectedStreets}\n          isLoadingAddresses={isLoadingAddresses}\n          addressLookupStep={addressLookupStep}\n          searchAddresses={searchAddresses}\n          selectAddress={selectAddress}\n          toggleStreetSelection={toggleStreetSelection}\n          importSelectedStreets={importSelectedStreets}\n          resetAddressLookup={resetAddressLookup}\n        />\n      </Drawer>\n\n      {/* New Street Modal */}\n      <Drawer open={showNewStreetModal} onClose={()=>setShowNewStreetModal(false)} title=\"Add New Street\" size=\"small\">\n        <NewStreetForm onSubmit={createNewStreet} onCancel={() => setShowNewStreetModal(false)} />\n      </Drawer>\n\n      {/* Import Streets Modal */}\n      <Drawer open={showImportStreetsModal} onClose={()=>setShowImportStreetsModal(false)} title=\"Import Streets\" size=\"small\">\n        <ImportStreetsForm \n          onSubmit={importSelectedStreets} \n          onCancel={() => setShowImportStreetsModal(false)}\n          addressSearchTerm={addressSearchTerm}\n          setAddressSearchTerm={setAddressSearchTerm}\n          addressSuggestions={addressSuggestions}\n          selectedPostcode={selectedPostcode}\n          selectedTown={selectedTown}\n          availableStreets={availableStreets}\n          selectedStreets={selectedStreets}\n          isLoadingAddresses={isLoadingAddresses}\n          addressLookupStep={addressLookupStep}\n          searchAddresses={searchAddresses}\n          selectAddress={selectAddress}\n          toggleStreetSelection={toggleStreetSelection}\n          importSelectedStreets={importSelectedStreets}\n          resetAddressLookup={resetAddressLookup}\n        />\n      </Drawer>\n\n      {/* Edit Campaign Modal */}\n      <Drawer open={showEditCampaignModal} onClose={()=>setShowEditCampaignModal(false)} title=\"Edit Campaign\" size=\"small\">\n        <EditCampaignForm campaign={editingCampaign} onSubmit={editCampaign} onCancel={() => setShowEditCampaignModal(false)} />\n      </Drawer>\n\n      {/* Edit Street Modal */}\n      <Drawer open={showEditStreetModal} onClose={()=>setShowEditStreetModal(false)} title=\"Edit Street\" size=\"small\">\n        <EditStreetForm street={editingStreet} onSubmit={editStreet} onCancel={() => setShowEditStreetModal(false)} />\n      </Drawer>\n\n      {/* Property Manager Modal */}\n      <Drawer open={showPropertyManagerModal} onClose={()=>setShowPropertyManagerModal(false)} title=\"Manage Properties\" size=\"large\">\n        <PropertyManager street={activeStreet} onAddProperty={addProperty} onRemoveProperty={removeProperty} onEditProperty={editPropertyLabel} onClose={() => setShowPropertyManagerModal(false)} />\n      </Drawer>\n\n      {/* Mobile Floating Action Buttons */}\n      <div className=\"lg:hidden fixed bottom-6 right-6 z-50\">\n        <div className=\"flex flex-col gap-2\">\n          <button \n            onClick={() => setShowScripts(true)}\n            className=\"w-12 h-12 rounded-full bg-primary-600 text-white shadow-lg hover:bg-primary-700 transition-colors flex items-center justify-center\"\n            title=\"Scripts\"\n          >\n            <MessageSquare className=\"w-5 h-5\" />\n          </button>\n          <button \n            onClick={() => setShowLinks(true)}\n            className=\"w-12 h-12 rounded-full bg-gray-600 text-white shadow-lg hover:bg-gray-700 transition-colors flex items-center justify-center\"\n            title=\"Quick Links\"\n          >\n            <Link2 className=\"w-5 h-5\" />\n          </button>\n        </div>\n      </div>\n\n      {/* Footer Hint */}\n      <div className=\"max-w-6xl mx-auto px-4 pb-8 text-xs opacity-70\">\n        UW Street Smart - NL Activity Tracker v1.0.0 | Built for UW partners making a difference in their communities. | ¬© 2025 Alex Cameron. All rights reserved.\n      </div>\n    </div>\n  );\n}\n\n// --- Subcomponents ---\nfunction NavButton({ icon, label, active, onClick }) {\n  return (\n    <button\n      onClick={onClick}\n      className={`flex flex-col items-center justify-center gap-1 px-2 py-2 rounded-xl text-xs border transition-all min-w-0 lg:flex-row lg:gap-2 lg:px-3 lg:text-sm ${\n        active \n          ? \"bg-primary-600 text-white border-primary-600 shadow-md\" \n          : \"bg-white/70 dark:bg-gray-900/70 border-gray-200 dark:border-gray-800 hover:border-primary-400 hover:bg-gray-50 dark:hover:bg-gray-800\"\n      }`}\n    >\n      <span className=\"flex-shrink-0\">{icon}</span>\n      <span className=\"truncate text-center leading-tight\">{label}</span>\n    </button>\n  );\n}\n\nfunction Stat({ icon: Icon, label, value, sub }) {\n  return (\n    <div className=\"rounded-2xl p-3 sm:p-4 bg-white/70 dark:bg-gray-900/70 border border-gray-200 dark:border-gray-800 shadow-soft flex items-center gap-2 sm:gap-3 min-w-0\">\n      <div className=\"p-1.5 sm:p-2 rounded-xl bg-gray-100 dark:bg-gray-800 flex-shrink-0\">\n        <Icon className=\"w-4 h-4 sm:w-5 sm:h-5 text-primary-600\" />\n      </div>\n      <div className=\"min-w-0 flex-1\">\n        <div className=\"text-xl sm:text-2xl font-semibold leading-none\">{value}</div>\n        <div className=\"text-xs sm:text-sm opacity-70 truncate\">{label}</div>\n        {sub && <div className=\"text-xs opacity-60 mt-1\">{sub}</div>}\n      </div>\n    </div>\n  );\n}\n\nfunction Dashboard({ stats, activeCampaign, onGoStreets }) {\n  const hasData = activeCampaign && activeCampaign.streets.length > 0;\n  \n  return (\n    <div className=\"space-y-4\">\n      <SectionCard title=\"Active Campaign\" icon={MapPin}>\n        {activeCampaign ? (\n          <div className=\"space-y-3\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex-1 min-w-0\">\n                <div className=\"text-lg font-semibold truncate\">{activeCampaign.name}</div>\n                <div className=\"text-sm opacity-70\">\n                  Area: {activeCampaign.area || 'Not set'} ‚Ä¢ Streets: {activeCampaign.streets.length}\n                </div>\n              </div>\n              <div className=\"flex items-center gap-2 flex-shrink-0\">\n                <Chip variant={activeCampaign.status === 'active' ? 'success' : 'default'}>\n                  {activeCampaign.status}\n                </Chip>\n              </div>\n            </div>\n            <div className=\"flex gap-2\">\n              <button \n                onClick={onGoStreets} \n                className=\"flex-1 px-3 py-2 rounded-xl bg-primary-600 text-white text-sm flex items-center justify-center gap-2 hover:bg-primary-700 transition-colors\"\n              >\n                <MapPin className=\"w-4 h-4\"/> Go to Streets\n              </button>\n              <button className=\"px-3 py-2 rounded-xl bg-gray-100 dark:bg-gray-800 text-sm flex items-center gap-2 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\">\n                <Plus className=\"w-4 h-4\"/> Add Street\n              </button>\n            </div>\n          </div>\n        ) : (\n          <div className=\"text-center py-6\">\n            <div className=\"w-16 h-16 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center mx-auto mb-4\">\n              <Target className=\"w-8 h-8 text-gray-400\" />\n            </div>\n            <h3 className=\"text-lg font-medium mb-2\">No active campaign</h3>\n            <p className=\"text-gray-600 dark:text-gray-400 mb-4\">Get started by creating your first neighbourhood campaign</p>\n            <button \n              onClick={onGoStreets} \n              className=\"px-4 py-2 rounded-xl bg-primary-600 text-white text-sm hover:bg-primary-700 transition-colors\"\n            >\n              Create First Campaign\n            </button>\n          </div>\n        )}\n      </SectionCard>\n\n      <SectionCard \n        title=\"Today's Activity\" \n        icon={Home} \n        actions={\n          hasData ? (\n            <button \n              onClick={onGoStreets} \n              className=\"px-3 py-1.5 rounded-xl bg-primary-600 text-white text-sm flex items-center gap-2 hover:bg-primary-700 transition-colors\"\n            >\n              Go to Streets <ChevronRight className=\"w-4 h-4\"/>\n            </button>\n          ) : (\n            <button \n              onClick={onGoStreets} \n              className=\"px-3 py-1.5 rounded-xl bg-primary-600 text-white text-sm flex items-center gap-2 hover:bg-primary-700 transition-colors\"\n            >\n              Create Campaign <ChevronRight className=\"w-4 h-4\"/>\n            </button>\n          )\n        }\n      >\n        {hasData ? (\n          <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-3\">\n            <Stat icon={UploadCloud} label=\"Letters dropped today\" value={stats.letters} />\n            <Stat icon={MessageSquare} label=\"Conversations today\" value={stats.convos} />\n            <Stat icon={CheckCircle} label=\"Successes today\" value={stats.interested} />\n            <Stat icon={CalendarClock} label=\"Follow‚Äëups scheduled today\" value={stats.followups} />\n          </div>\n        ) : (\n          <div className=\"text-center py-6\">\n            <div className=\"w-12 h-12 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center mx-auto mb-3\">\n              <Home className=\"w-6 h-6 text-gray-400\" />\n            </div>\n            <p className=\"text-gray-600 dark:text-gray-400\">No activity recorded today</p>\n          </div>\n        )}\n      </SectionCard>\n\n      {hasData && stats.outcomes && (\n        <SectionCard title=\"Conversation Outcomes\" icon={MessageSquare}>\n          <div className=\"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-3\">\n            <div className=\"p-2 sm:p-3 rounded-xl bg-green-50 dark:bg-green-900/20 border-2 border-green-500 dark:border-green-500\">\n              <div className=\"text-base sm:text-lg font-semibold text-green-800 dark:text-green-200\">{stats.outcomes.customer_signed}</div>\n              <div className=\"text-xs sm:text-sm text-green-700 dark:text-green-300\">Customers Signed</div>\n            </div>\n            <div className=\"p-2 sm:p-3 rounded-xl bg-emerald-50 dark:bg-emerald-900/20 border-2 border-emerald-500 dark:border-emerald-500\">\n              <div className=\"text-base sm:text-lg font-semibold text-emerald-800 dark:text-emerald-200\">{stats.outcomes.appointment_booked}</div>\n              <div className=\"text-xs sm:text-sm text-emerald-700 dark:text-emerald-300\">Appointment Booked</div>\n            </div>\n            <div className=\"p-2 sm:p-3 rounded-xl bg-amber-50 dark:bg-amber-900/20 border-2 border-amber-500 dark:border-amber-500\">\n              <div className=\"text-base sm:text-lg font-semibold text-amber-800 dark:text-amber-200\">{stats.outcomes.no_for_now}</div>\n              <div className=\"text-xs sm:text-sm text-amber-700 dark:text-amber-300\">No for Now</div>\n            </div>\n            <div className=\"p-2 sm:p-3 rounded-xl bg-sky-50 dark:bg-sky-900/20 border-2 border-sky-500 dark:border-sky-500\">\n              <div className=\"text-base sm:text-lg font-semibold text-sky-800 dark:text-sky-200\">{stats.outcomes.already_uw}</div>\n              <div className=\"text-xs sm:text-sm text-sky-700 dark:text-sky-300\">Already with UW</div>\n            </div>\n            <div className=\"p-2 sm:p-3 rounded-xl bg-red-50 dark:bg-red-900/20 border-2 border-red-500 dark:border-red-500\">\n              <div className=\"text-base sm:text-lg font-semibold text-red-800 dark:text-red-200\">{stats.outcomes.not_interested}</div>\n              <div className=\"text-xs sm:text-sm text-red-700 dark:text-red-300\">Not Interested</div>\n            </div>\n            <div className=\"p-2 sm:p-3 rounded-xl bg-slate-50 dark:bg-slate-900/20 border-2 border-slate-500 dark:border-slate-500\">\n              <div className=\"text-base sm:text-lg font-semibold text-slate-800 dark:text-slate-200\">{stats.outcomes.no_answer || 0}</div>\n              <div className=\"text-xs sm:text-sm text-slate-700 dark:text-slate-300\">No Answer</div>\n            </div>\n            <div className=\"p-2 sm:p-3 rounded-xl bg-purple-50 dark:bg-purple-900/20 border-2 border-purple-500 dark:border-purple-500\">\n              <div className=\"text-base sm:text-lg font-semibold text-purple-800 dark:text-purple-200\">{stats.outcomes.no_cold_callers || 0}</div>\n              <div className=\"text-xs sm:text-sm text-purple-700 dark:text-purple-300\">No Cold Callers</div>\n            </div>\n\n          </div>\n        </SectionCard>\n      )}\n\n\n    </div>\n  );\n}\n\nfunction Campaigns({ campaigns, activeId, onSelect, onCreateNew, onEdit, onDelete, onToggleComplete }) {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [statusFilter, setStatusFilter] = useState(\"all\");\n  const [sortBy, setSortBy] = useState(\"name\");\n  const [showFilters, setShowFilters] = useState(false);\n\n  // Filter and sort campaigns\n  const filteredCampaigns = useMemo(() => {\n    let filtered = campaigns.filter(c => {\n      const matchesSearch = c.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                           c.area.toLowerCase().includes(searchTerm.toLowerCase());\n      const matchesStatus = statusFilter === \"all\" || c.status === statusFilter;\n      return matchesSearch && matchesStatus;\n    });\n\n    // Sort campaigns\n    filtered.sort((a, b) => {\n      switch (sortBy) {\n        case \"name\":\n          return a.name.localeCompare(b.name);\n        case \"date\":\n          return new Date(b.created_at) - new Date(a.created_at);\n        case \"streets\":\n          return b.streets.length - a.streets.length;\n        case \"status\":\n          return a.status.localeCompare(b.status);\n        default:\n          return 0;\n      }\n    });\n\n    return filtered;\n  }, [campaigns, searchTerm, statusFilter, sortBy]);\n\n  return (\n    <div className=\"space-y-3\">\n      <SectionCard \n        title=\"Create New Campaign\" \n        icon={Plus}\n        actions={\n          <button \n            onClick={onCreateNew}\n            className=\"px-3 py-1.5 rounded-xl bg-primary-600 text-white text-sm hover:bg-primary-700 transition-colors\"\n          >\n            <Plus className=\"w-4 h-4\"/> New Campaign\n          </button>\n        }\n      >\n        <div className=\"text-sm text-gray-600 dark:text-gray-400\">\n          Create a new neighbourhood letters campaign to start tracking activity.\n        </div>\n      </SectionCard>\n\n      <SectionCard \n        title=\"Search & Filter\" \n        icon={Search}\n        actions={\n          <button \n            onClick={() => setShowFilters(!showFilters)}\n            className=\"px-3 py-1.5 rounded-xl bg-gray-100 dark:bg-gray-800 text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors flex items-center gap-2\"\n          >\n            {showFilters ? <ChevronRight className=\"w-4 h-4\" /> : <Search className=\"w-4 h-4\" />}\n            {showFilters ? 'Hide' : 'Show'} Filters\n          </button>\n        }\n      >\n        {showFilters && (\n          <div className=\"space-y-3\">\n            {/* Search */}\n            <div>\n              <label className=\"text-xs opacity-70\">Search campaigns</label>\n              <input \n                type=\"text\" \n                value={searchTerm} \n                onChange={(e) => setSearchTerm(e.target.value)}\n                placeholder=\"Search by name or area...\"\n                className=\"w-full mt-1 p-2 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\"\n              />\n            </div>\n            \n            <div className=\"grid grid-cols-2 gap-3\">\n              {/* Status Filter */}\n              <div>\n                <label className=\"text-xs opacity-70\">Status</label>\n                <select \n                  value={statusFilter} \n                  onChange={(e) => setStatusFilter(e.target.value)}\n                  className=\"w-full mt-1 p-2 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\"\n                >\n                  <option value=\"all\">All Status</option>\n                  <option value=\"draft\">Draft</option>\n                  <option value=\"active\">Active</option>\n                  <option value=\"archived\">Archived</option>\n                </select>\n              </div>\n              \n              {/* Sort By */}\n              <div>\n                <label className=\"text-xs opacity-70\">Sort by</label>\n                <select \n                  value={sortBy} \n                  onChange={(e) => setSortBy(e.target.value)}\n                  className=\"w-full mt-1 p-2 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\"\n                >\n                  <option value=\"name\">Name</option>\n                  <option value=\"date\">Date Created</option>\n                  <option value=\"streets\">Number of Streets</option>\n                  <option value=\"status\">Status</option>\n                </select>\n              </div>\n            </div>\n            \n            <div className=\"text-xs opacity-70\">\n              Showing {filteredCampaigns.length} of {campaigns.length} campaigns\n            </div>\n          </div>\n        )}\n      </SectionCard>\n      \n      {filteredCampaigns.map(c => (\n        <SectionCard key={c.id} title={c.name} icon={MapPin} actions={\n          <div className=\"flex gap-2\">\n            <button \n              className=\"px-3 py-1.5 rounded-xl bg-primary-600 text-white text-sm hover:bg-primary-700 transition-colors\" \n              onClick={()=>onSelect(c.id)}\n            >\n              Open\n            </button>\n            <button \n              className=\"px-3 py-1.5 rounded-xl bg-gray-100 dark:bg-gray-800 text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\"\n              onClick={() => onEdit(c)}\n            >\n              Edit\n            </button>\n            <button \n              className={`px-3 py-1.5 rounded-xl text-sm transition-colors border ${\n                c.status === 'completed' \n                  ? 'bg-orange-100 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400 hover:bg-orange-200 dark:hover:bg-orange-900/30 border-orange-200 dark:border-orange-800'\n                  : 'bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400 hover:bg-green-200 dark:hover:bg-green-900/30 border-green-200 dark:border-green-800'\n              }`}\n              onClick={() => {\n                if (c.status === 'completed') {\n                  if (confirm('Unmark this campaign as completed? This will clear \"No Answer\" outcomes for properties that need follow-up while preserving manually set outcomes.')) {\n                    onToggleComplete(c.id);\n                  }\n                } else {\n                  if (confirm('Mark this campaign as completed? This will set properties without outcomes to \"No Answer\" while preserving existing status and outcomes.')) {\n                    onToggleComplete(c.id);\n                  }\n                }\n              }}\n            >\n              {c.status === 'completed' ? 'Mark Incomplete' : 'Mark Complete'}\n            </button>\n            <button \n              className=\"px-3 py-1.5 rounded-xl bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm hover:bg-red-200 dark:hover:bg-red-900/30 transition-colors border border-red-200 dark:border-red-800\"\n              onClick={() => onDelete(c.id)}\n            >\n              Delete\n            </button>\n          </div>\n        }>\n          <div className=\"flex items-center justify-between text-sm\">\n            <div>Area: <strong>{c.area || 'Not set'}</strong></div>\n            <div className=\"flex items-center gap-2\">\n                              <Chip variant={c.status === 'active' ? 'success' : 'default'}>\n                  {c.status === 'planned' ? 'Planned' : c.status}\n                </Chip>\n              <div className=\"text-xs opacity-70\">\n                {c.streets.length} streets ‚Ä¢ Created {c.created_at}\n              </div>\n            </div>\n          </div>\n        </SectionCard>\n      ))}\n    </div>\n  );\n}\n\nfunction Streets({ campaign, activeStreetId, onSelectStreet, onOpenProperty, onAddStreet, onEditStreet, onDeleteStreet, onManageProperties, onImportStreets }) {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [statusFilter, setStatusFilter] = useState(\"all\");\n  const [sortBy, setSortBy] = useState(\"name\");\n  const [showFilters, setShowFilters] = useState(false);\n\n  // Filter and sort streets\n  const filteredStreets = useMemo(() => {\n    let filtered = campaign.streets.filter(s => {\n      const matchesSearch = s.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                           s.postcode.toLowerCase().includes(searchTerm.toLowerCase());\n      const matchesStatus = statusFilter === \"all\" || s.status === statusFilter;\n      return matchesSearch && matchesStatus;\n    });\n\n    // Sort streets\n    filtered.sort((a, b) => {\n      switch (sortBy) {\n        case \"name\":\n          return a.name.localeCompare(b.name);\n        case \"properties\":\n          return b.properties.length - a.properties.length;\n        case \"status\":\n          return a.status.localeCompare(b.status);\n        case \"postcode\":\n          return a.postcode.localeCompare(b.postcode);\n        default:\n          return 0;\n      }\n    });\n\n    return filtered;\n  }, [campaign.streets, searchTerm, statusFilter, sortBy]);\n\n  return (\n    <div className=\"space-y-4\">\n      <SectionCard \n        title={`Streets in ${campaign.name}`} \n        icon={MapPin} \n        actions={\n          <div className=\"flex gap-2\">\n            <button \n              onClick={onAddStreet}\n              className=\"px-3 py-1.5 rounded-xl bg-primary-600 text-white text-sm hover:bg-primary-700 transition-colors\"\n            >\n              <Plus className=\"w-4 h-4\"/> Add street\n            </button>\n            <button \n              onClick={() => onImportStreets(campaign.id)}\n              className=\"px-3 py-1.5 rounded-xl bg-green-600 text-white text-sm hover:bg-green-700 transition-colors\"\n            >\n              <MapPin className=\"w-4 h-4\"/> Import Streets\n            </button>\n          </div>\n        }\n      >\n        <SectionCard \n          title=\"Search & Filter\" \n          icon={Search}\n          actions={\n            <button \n              onClick={() => setShowFilters(!showFilters)}\n              className=\"px-3 py-1.5 rounded-xl bg-gray-100 dark:bg-gray-800 text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors flex items-center gap-2\"\n            >\n              {showFilters ? <ChevronRight className=\"w-4 h-4\" /> : <Search className=\"w-4 h-4\" />}\n              {showFilters ? 'Hide' : 'Show'} Filters\n            </button>\n          }\n        >\n          {showFilters && (\n            <div className=\"space-y-3\">\n              {/* Search */}\n              <div>\n                <label className=\"text-xs opacity-70\">Search streets</label>\n                <input \n                  type=\"text\" \n                  value={searchTerm} \n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  placeholder=\"Search by street name or postcode...\"\n                  className=\"w-full mt-1 p-2 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\"\n                />\n              </div>\n              \n              <div className=\"grid grid-cols-2 gap-3\">\n                {/* Status Filter */}\n                <div>\n                  <label className=\"text-xs opacity-70\">Status</label>\n                  <select \n                    value={statusFilter} \n                    onChange={(e) => setStatusFilter(e.target.value)}\n                    className=\"w-full mt-1 p-2 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\"\n                  >\n                    <option value=\"all\">All Status</option>\n                    <option value=\"not_started\">Not Started</option>\n                    <option value=\"in_progress\">In Progress</option>\n                    <option value=\"completed\">Completed</option>\n                  </select>\n                </div>\n                \n                {/* Sort By */}\n                <div>\n                  <label className=\"text-xs opacity-70\">Sort by</label>\n                  <select \n                    value={sortBy} \n                    onChange={(e) => setSortBy(e.target.value)}\n                    className=\"w-full mt-1 p-2 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\"\n                  >\n                    <option value=\"name\">Street Name</option>\n                    <option value=\"properties\">Number of Properties</option>\n                    <option value=\"status\">Status</option>\n                    <option value=\"postcode\">Postcode</option>\n                  </select>\n                </div>\n              </div>\n              \n              <div className=\"text-xs opacity-70\">\n                Showing {filteredStreets.length} of {campaign.streets.length} streets\n              </div>\n            </div>\n          )}\n        </SectionCard>\n        {filteredStreets.length > 0 ? (\n          <div className=\"grid md:grid-cols-2 gap-3\">\n            {filteredStreets.map(s => (\n            <div \n              key={s.id} \n              className={`rounded-2xl border p-4 bg-white/70 dark:bg-gray-900/70 transition-all ${\n                s.id===activeStreetId \n                  ? 'border-primary-400 shadow-md' \n                  : 'border-gray-200 dark:border-gray-800 hover:border-gray-300 dark:hover:border-gray-700'\n              }`}\n            >\n              <div className=\"flex items-center justify-between mb-2\">\n                <div className=\"font-medium\">\n                  {s.name} <span className=\"opacity-60 text-sm\">‚Ä¢ {s.postcode}</span>\n                </div>\n                <Chip variant={\n                  s.status === 'completed' ? 'success' : \n                  s.status === 'in_progress' ? 'warning' : 'default'\n                }>\n                  {s.status.replace('_',' ')}\n                </Chip>\n              </div>\n              <div className=\"text-xs opacity-70 mb-3\">{s.properties.length} properties</div>\n              \n              {/* Property buttons with better layout */}\n              <div className=\"mb-3\">\n                <div className=\"flex flex-wrap gap-1 max-h-20 overflow-y-auto\">\n                  {s.properties.map(p => {\n                    // Determine button styling based on progression and outcome\n                    let buttonStyle = 'border border-gray-300 dark:border-gray-700 hover:border-gray-400 dark:hover:border-gray-600';\n                    \n                    // OUTCOMES (Final Results) - Bold borders (2px) + Saturated colors\n                    if (p.result === 'customer_signed') {\n                      buttonStyle = 'border-2 border-green-500 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200';\n                    } else if (p.result === 'appointment_booked') {\n                      buttonStyle = 'border-2 border-emerald-500 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-800 dark:text-emerald-200';\n                    } else if (p.result === 'no_for_now') {\n                      buttonStyle = 'border-2 border-amber-500 bg-amber-50 dark:bg-amber-900/20 text-amber-800 dark:text-amber-200';\n                    } else if (p.result === 'already_uw') {\n                      buttonStyle = 'border-2 border-sky-500 bg-sky-50 dark:bg-sky-900/20 text-sky-800 dark:text-sky-200';\n                    } else if (p.result === 'not_interested') {\n                      buttonStyle = 'border-2 border-red-500 bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-200';\n                    } else if (p.result === 'no_answer') {\n                      buttonStyle = 'border-2 border-slate-500 bg-slate-50 dark:bg-slate-900/20 text-slate-800 dark:text-slate-200';\n                    } else if (p.result === 'no_cold_callers') {\n                      buttonStyle = 'border-2 border-purple-500 bg-purple-50 dark:bg-purple-900/20 text-purple-800 dark:text-purple-200';\n                    } \n                    // STATUS STATES (Activity Progress) - Thin borders (1px) + Muted colors\n                    else if (p.spoke) {\n                      buttonStyle = 'border border-teal-300 bg-teal-50/50 dark:bg-teal-900/10 text-teal-600 dark:text-teal-400';\n                    } else if (p.knocked) {\n                      buttonStyle = 'border border-indigo-300 bg-indigo-50/50 dark:bg-indigo-900/10 text-indigo-600 dark:text-indigo-400';\n                    } else if (p.dropped) {\n                      buttonStyle = 'border border-orange-300 bg-orange-50/50 dark:bg-orange-900/10 text-orange-600 dark:text-orange-400';\n                    }\n                    \n                    return (\n                      <button \n                        key={p.id} \n                        onClick={()=>onOpenProperty(s.id, p.id)} \n                        className={`px-2 py-1 rounded-lg text-xs transition-colors flex-shrink-0 ${buttonStyle}`}\n                        title={\n                          p.result && p.result !== 'none' \n                            ? `Outcome: ${p.result.replace('_', ' ')}` \n                            : p.spoke \n                              ? 'Spoke - No outcome set' \n                              : p.knocked \n                                ? 'Knocked - No outcome set' \n                                : p.dropped \n                                  ? 'Dropped - No outcome set' \n                                  : 'No activity recorded'\n                        }\n                      >\n                        {p.label}\n                      </button>\n                    );\n                  })}\n                </div>\n              </div>\n              \n              <div className=\"flex items-center gap-2\">\n                <button \n                  onClick={() => onManageProperties(s)}\n                  className=\"px-3 py-1.5 rounded-xl bg-blue-100 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 text-sm hover:bg-blue-200 dark:hover:bg-blue-900/30 transition-colors border border-blue-200 dark:border-blue-800\"\n                >\n                  Properties\n                </button>\n                <button \n                  onClick={() => onEditStreet(s)}\n                  className=\"px-3 py-1.5 rounded-xl bg-gray-100 dark:bg-gray-800 text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\"\n                >\n                  Edit\n                </button>\n                <button \n                  onClick={() => onDeleteStreet(s.id)}\n                  className=\"px-3 py-1.5 rounded-xl bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm hover:bg-red-200 dark:hover:bg-red-900/30 transition-colors border border-red-200 dark:border-red-800\"\n                >\n                  Delete\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n        ) : searchTerm || statusFilter !== \"all\" ? (\n          <div className=\"text-center py-8\">\n            <div className=\"w-16 h-16 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center mx-auto mb-4\">\n              <Search className=\"w-8 h-8 text-gray-400\" />\n            </div>\n            <h3 className=\"text-lg font-medium mb-2\">No streets found</h3>\n            <p className=\"text-gray-600 dark:text-gray-400 mb-4\">Try adjusting your search or filter criteria</p>\n            <button \n              onClick={() => { setSearchTerm(\"\"); setStatusFilter(\"all\"); }}\n              className=\"px-4 py-2 rounded-xl bg-gray-100 dark:bg-gray-800 text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\"\n            >\n              Clear Filters\n            </button>\n          </div>\n        ) : (\n          <div className=\"text-center py-8\">\n            <div className=\"w-16 h-16 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center mx-auto mb-4\">\n              <MapPin className=\"w-8 h-8 text-gray-400\" />\n            </div>\n            <h3 className=\"text-lg font-medium mb-2\">No streets yet</h3>\n            <p className=\"text-gray-600 dark:text-gray-400 mb-4\">Add your first street to start tracking neighbourhood letters</p>\n            <button \n              onClick={onAddStreet}\n              className=\"px-4 py-2 rounded-xl bg-primary-600 text-white text-sm hover:bg-primary-700 transition-colors\"\n            >\n              Add First Street\n            </button>\n          </div>\n        )}\n      </SectionCard>\n    </div>\n  );\n}\n\nfunction ToggleRow({ label, value, onChange }) {\n  return (\n    <div className=\"flex items-center justify-between py-2\">\n      <div className=\"text-sm\">{label}</div>\n      <button \n        onClick={()=>onChange(!value)} \n        className={`w-11 h-6 rounded-full p-1 transition-colors ${\n          value ? 'bg-primary-600' : 'bg-gray-300 dark:bg-gray-700'\n        }`}\n      >\n        <div className={`w-4 h-4 rounded-full bg-white transition-transform ${value ? 'translate-x-5' : ''}`}></div>\n      </button>\n    </div>\n  );\n}\n\nfunction PropertyView({ street, property, onBack, onUpdate, onShowScripts, onShowLinks, onToggleStatus }) {\n  const [showFollowUp, setShowFollowUp] = useState(false);\n  const [showPhotoModal, setShowPhotoModal] = useState(false);\n  const [notes, setNotes] = useState(\"\");\n\n  return (\n    <div className=\"space-y-4\">\n      <button \n        onClick={onBack} \n        className=\"text-sm opacity-70 hover:opacity-100 transition-opacity flex items-center gap-1\"\n      >\n        <ChevronRight className=\"w-4 h-4 rotate-180\" /> Back to streets\n      </button>\n\n      <SectionCard \n        title={`${property.label} ¬∑ ${street.name}`} \n        icon={Home} \n        actions={\n          <Chip variant=\"default\" className=\"text-xs\">\n            {street.postcode}\n          </Chip>\n        }\n      >\n        <div className=\"grid md:grid-cols-3 gap-3\">\n          <ActionButton \n            active={property.dropped} \n            icon={UploadCloud} \n            label=\"Dropped\" \n            onClick={() => onToggleStatus(property.id, 'dropped')} \n          />\n          <ActionButton \n            active={property.knocked} \n            icon={Check} \n            label=\"Knocked\" \n            onClick={() => onToggleStatus(property.id, 'knocked')} \n          />\n          <ActionButton \n            active={property.spoke} \n            icon={MessageSquare} \n            label=\"Spoke\" \n            onClick={() => onToggleStatus(property.id, 'spoke')} \n          />\n        </div>\n\n        <div className=\"mt-3 grid md:grid-cols-2 gap-3\">\n          <button \n            onClick={()=>setShowFollowUp(true)} \n            className=\"w-full px-3 py-2 rounded-xl bg-gray-100 dark:bg-gray-800 flex items-center justify-center gap-2 text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\"\n          >\n            <CalendarClock className=\"w-4 h-4\"/> Schedule follow‚Äëup\n          </button>\n          <div className=\"flex gap-2\">\n            <button \n              onClick={onShowScripts} \n              className=\"flex-1 px-3 py-2 rounded-xl bg-primary-600 text-white text-sm flex items-center justify-center gap-2 hover:bg-primary-700 transition-colors\"\n            >\n              <MessageSquare className=\"w-4 h-4\"/> Scripts\n            </button>\n            <button \n              onClick={onShowLinks} \n              className=\"flex-1 px-3 py-2 rounded-xl bg-gray-100 dark:bg-gray-800 text-sm flex items-center justify-center gap-2 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\"\n            >\n              <Link2 className=\"w-4 h-4\"/> Links\n            </button>\n          </div>\n        </div>\n\n        <div className=\"mt-4\">\n          <label className=\"text-xs opacity-70\">Notes (avoid personal data)</label>\n          <textarea \n            value={notes} \n            onChange={e=>setNotes(e.target.value)} \n            className=\"w-full mt-1 p-3 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\" \n            rows={3} \n            placeholder=\"e.g., 'best after 6pm', 'steep steps'\"\n          />\n          <div className=\"mt-4\">\n            <label className=\"text-xs opacity-70 mb-2 block\">Conversation Outcome</label>\n            <div className=\"grid grid-cols-2 gap-2\">\n              <OutcomeButton \n                label=\"Customers Signed\" \n                value=\"customer_signed\" \n                current={property.result} \n                onClick={() => onUpdate({ result: 'customer_signed' })}\n                variant=\"success\"\n              />\n              <OutcomeButton \n                label=\"Appointment Booked\" \n                value=\"appointment_booked\" \n                current={property.result} \n                onClick={() => onUpdate({ result: 'appointment_booked' })}\n                variant=\"success\"\n              />\n              <OutcomeButton \n                label=\"No for Now\" \n                value=\"no_for_now\" \n                current={property.result} \n                onClick={() => onUpdate({ result: 'no_for_now' })}\n                variant=\"warning\"\n              />\n              <OutcomeButton \n                label=\"Already with UW\" \n                value=\"already_uw\" \n                current={property.result} \n                onClick={() => onUpdate({ result: 'already_uw' })}\n                variant=\"info\"\n              />\n              <OutcomeButton \n                label=\"Not Interested\" \n                value=\"not_interested\" \n                current={property.result} \n                onClick={() => onUpdate({ result: 'not_interested' })}\n                variant=\"error\"\n              />\n              <OutcomeButton \n                label=\"No Answer\" \n                value=\"no_answer\" \n                current={property.result} \n                onClick={() => onUpdate({ result: 'no_answer' })}\n                variant=\"default\"\n              />\n              <OutcomeButton \n                label=\"No Cold Callers\" \n                value=\"no_cold_callers\" \n                current={property.result} \n                onClick={() => onUpdate({ result: 'no_cold_callers' })}\n                variant=\"purple\"\n              />\n            </div>\n          </div>\n          \n          <div className=\"flex items-center justify-between mt-4\">\n            <button \n              onClick={() => setShowPhotoModal(true)}\n              className=\"px-3 py-1.5 rounded-xl bg-gray-100 dark:bg-gray-800 text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors flex items-center gap-2\"\n            >\n              <Upload className=\"w-4 h-4\" />\n              {property.photo ? 'Change photo' : 'Attach photo'}\n            </button>\n            <button \n              onClick={() => onUpdate({ result: 'none' })}\n              className=\"px-3 py-1.5 rounded-xl bg-gray-100 dark:bg-gray-800 text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\"\n            >\n              Clear outcome\n            </button>\n          </div>\n          \n          {property.photo && (\n            <div className=\"mt-3\">\n              <div className=\"relative\">\n                <img \n                  src={property.photo} \n                  alt=\"Property photo\" \n                  className=\"w-full h-32 object-cover rounded-xl border border-gray-200 dark:border-gray-800\"\n                />\n                <button \n                  onClick={() => onUpdate({ photo: null })}\n                  className=\"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors\"\n                >\n                  <X className=\"w-3 h-3\" />\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </SectionCard>\n\n      <FollowUpModal \n        open={showFollowUp} \n        onClose={()=>setShowFollowUp(false)} \n        onSave={(dt)=>{ onUpdate({ followUpAt: dt }); setShowFollowUp(false); }} \n      />\n      \n      <PhotoModal \n        open={showPhotoModal} \n        onClose={()=>setShowPhotoModal(false)} \n        onSave={(photoData)=>{ onUpdate({ photo: photoData }); setShowPhotoModal(false); }} \n      />\n    </div>\n  );\n}\n\nfunction ActionButton({ icon: Icon, label, active, onClick }) {\n  return (\n    <button \n      onClick={onClick} \n      className={`px-3 py-3 rounded-2xl border shadow-sm flex items-center justify-center gap-2 text-sm transition-all ${\n        active \n          ? 'bg-secondary-50 dark:bg-secondary-900/20 border-secondary-400 text-secondary-700 dark:text-secondary-300' \n          : 'bg-white/70 dark:bg-gray-900/70 border-gray-200 dark:border-gray-800 hover:border-gray-300 dark:hover:border-gray-700'\n      }`}\n    >\n      <Icon className=\"w-4 h-4\" /> {label}\n    </button>\n  );\n}\n\nfunction OutcomeButton({ label, value, current, onClick, variant = \"default\" }) {\n  const isActive = current === value;\n  \n  const variantStyles = {\n    success: isActive \n      ? 'bg-green-50 dark:bg-green-900/20 border-green-400 text-green-700 dark:text-green-300' \n      : 'bg-white/70 dark:bg-gray-900/70 border-gray-200 dark:border-gray-800 hover:border-green-300 dark:hover:border-green-700',\n    warning: isActive \n      ? 'bg-yellow-50 dark:bg-yellow-900/20 border-yellow-400 text-yellow-700 dark:text-yellow-300' \n      : 'bg-white/70 dark:bg-gray-900/70 border-gray-200 dark:border-gray-800 hover:border-yellow-300 dark:hover:border-yellow-700',\n    error: isActive \n      ? 'bg-red-50 dark:bg-red-900/20 border-red-400 text-red-700 dark:text-red-300' \n      : 'bg-white/70 dark:bg-gray-900/70 border-gray-200 dark:border-gray-800 hover:border-red-300 dark:hover:border-red-700',\n    info: isActive \n      ? 'bg-blue-50 dark:bg-blue-900/20 border-blue-400 text-blue-700 dark:text-blue-300' \n      : 'bg-white/70 dark:bg-gray-900/70 border-gray-200 dark:border-gray-800 hover:border-blue-300 dark:hover:border-blue-700',\n    purple: isActive \n      ? 'bg-purple-50 dark:bg-purple-900/20 border-purple-400 text-purple-700 dark:text-purple-300' \n      : 'bg-white/70 dark:bg-gray-900/70 border-gray-200 dark:border-gray-800 hover:border-purple-300 dark:hover:border-purple-700',\n    default: isActive \n      ? 'bg-gray-50 dark:bg-gray-800/60 border-gray-400 text-gray-700 dark:text-gray-300' \n      : 'bg-white/70 dark:bg-gray-900/70 border-gray-200 dark:border-gray-800 hover:border-gray-300 dark:hover:border-gray-700'\n  };\n\n  return (\n    <button \n      onClick={onClick} \n      className={`px-3 py-2 rounded-xl border text-sm transition-all ${variantStyles[variant]}`}\n    >\n      {label}\n    </button>\n  );\n}\n\nfunction FollowUpModal({ open, onClose, onSave }) {\n  const [date, setDate] = useState(\"\");\n  const [time, setTime] = useState(\"\");\n\n  return (\n    <Drawer open={open} onClose={onClose} title=\"Schedule follow‚Äëup\">\n      <div className=\"space-y-3\">\n        <div className=\"grid grid-cols-2 gap-3\">\n          <div>\n            <label className=\"text-xs opacity-70\">Date</label>\n            <div className=\"relative\">\n              <input \n                type=\"date\" \n                value={date} \n                onChange={e=>setDate(e.target.value)} \n                className=\"w-full mt-1 p-2 pr-10 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\"\n                style={{\n                  colorScheme: 'light dark'\n                }}\n              />\n              <div className=\"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none dark:bg-white dark:rounded-sm dark:p-0.5\">\n                <svg className=\"w-4 h-4 text-gray-500 dark:text-gray-900\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fillRule=\"evenodd\" d=\"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z\" clipRule=\"evenodd\" />\n                </svg>\n              </div>\n            </div>\n          </div>\n          <div>\n            <label className=\"text-xs opacity-70\">Time</label>\n            <div className=\"relative\">\n              <input \n                type=\"time\" \n                value={time} \n                onChange={e=>setTime(e.target.value)} \n                className=\"w-full mt-1 p-2 pr-10 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\"\n                style={{\n                  colorScheme: 'light dark'\n                }}\n              />\n              <div className=\"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none dark:bg-white dark:rounded-sm dark:p-0.5\">\n                <svg className=\"w-4 h-4 text-gray-500 dark:text-gray-900\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z\" clipRule=\"evenodd\" />\n                </svg>\n              </div>\n            </div>\n          </div>\n        </div>\n        <button \n          onClick={()=>onSave(`${date}T${time}:00`)} \n          className=\"w-full px-3 py-2 rounded-xl bg-primary-600 text-white text-sm hover:bg-primary-700 transition-colors\"\n        >\n          Save reminder\n        </button>\n      </div>\n    </Drawer>\n  );\n}\n\nfunction PhotoModal({ open, onClose, onSave }) {\n  const [capturedImage, setCapturedImage] = useState(null);\n  const [isCapturing, setIsCapturing] = useState(false);\n  const fileInputRef = useRef(null);\n\n  const handleFileSelect = (event) => {\n    const file = event.target.files[0];\n    if (file && file.type.startsWith('image/')) {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        setCapturedImage(e.target.result);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const startCamera = async () => {\n    try {\n      setIsCapturing(true);\n      const stream = await navigator.mediaDevices.getUserMedia({ \n        video: { \n          facingMode: 'environment',\n          width: { ideal: 1920 },\n          height: { ideal: 1080 }\n        } \n      });\n      \n      const video = document.createElement('video');\n      video.srcObject = stream;\n      video.autoplay = true;\n      video.style.width = '100%';\n      video.style.height = '300px';\n      video.style.objectFit = 'cover';\n      \n      const container = document.getElementById('camera-container');\n      if (container) {\n        container.innerHTML = '';\n        container.appendChild(video);\n      }\n    } catch (error) {\n      console.error('Error accessing camera:', error);\n      alert('Unable to access camera. Please use the gallery option instead.');\n      setIsCapturing(false);\n    }\n  };\n\n  const capturePhoto = () => {\n    const video = document.querySelector('#camera-container video');\n    if (video) {\n      const canvas = document.createElement('canvas');\n      canvas.width = video.videoWidth;\n      canvas.height = video.videoHeight;\n      const ctx = canvas.getContext('2d');\n      ctx.drawImage(video, 0, 0);\n      \n      const photoData = canvas.toDataURL('image/jpeg', 0.8);\n      setCapturedImage(photoData);\n      \n      // Stop camera stream\n      const stream = video.srcObject;\n      if (stream) {\n        stream.getTracks().forEach(track => track.stop());\n      }\n      setIsCapturing(false);\n    }\n  };\n\n  const handleSave = () => {\n    if (capturedImage) {\n      onSave(capturedImage);\n      setCapturedImage(null);\n    }\n  };\n\n  const handleClose = () => {\n    setCapturedImage(null);\n    setIsCapturing(false);\n    // Stop any active camera stream\n    const video = document.querySelector('#camera-container video');\n    if (video && video.srcObject) {\n      video.srcObject.getTracks().forEach(track => track.stop());\n    }\n    onClose();\n  };\n\n  return (\n    <Drawer open={open} onClose={handleClose} title=\"Add Property Photo\">\n      <div className=\"space-y-4\">\n        {!capturedImage && !isCapturing && (\n          <div className=\"space-y-3\">\n            <div className=\"text-sm text-gray-600 dark:text-gray-400\">\n              Take a photo or select from your gallery to document this property.\n            </div>\n            \n            <div className=\"grid grid-cols-2 gap-3\">\n              <button \n                onClick={startCamera}\n                className=\"px-4 py-3 rounded-xl bg-primary-600 text-white text-sm flex items-center justify-center gap-2 hover:bg-primary-700 transition-colors\"\n              >\n                <Camera className=\"w-4 h-4\" />\n                Take Photo\n              </button>\n              \n              <button \n                onClick={() => fileInputRef.current?.click()}\n                className=\"px-4 py-3 rounded-xl bg-gray-100 dark:bg-gray-800 text-sm flex items-center justify-center gap-2 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\"\n              >\n                <Upload className=\"w-4 h-4\" />\n                From Gallery\n              </button>\n            </div>\n            \n            <input \n              ref={fileInputRef}\n              type=\"file\" \n              accept=\"image/*\" \n              capture=\"environment\"\n              onChange={handleFileSelect}\n              className=\"hidden\"\n            />\n          </div>\n        )}\n\n        {isCapturing && (\n          <div className=\"space-y-3\">\n            <div id=\"camera-container\" className=\"w-full h-64 bg-black rounded-xl overflow-hidden flex items-center justify-center\">\n              <div className=\"text-white text-center\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-2\"></div>\n                <div>Starting camera...</div>\n              </div>\n            </div>\n            \n            <div className=\"flex gap-2\">\n              <button \n                onClick={capturePhoto}\n                className=\"flex-1 px-4 py-3 rounded-xl bg-primary-600 text-white text-sm hover:bg-primary-700 transition-colors\"\n              >\n                üì∏ Capture Photo\n              </button>\n              <button \n                onClick={() => {\n                  setIsCapturing(false);\n                  const video = document.querySelector('#camera-container video');\n                  if (video && video.srcObject) {\n                    video.srcObject.getTracks().forEach(track => track.stop());\n                  }\n                }}\n                className=\"px-4 py-3 rounded-xl bg-gray-100 dark:bg-gray-800 text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\"\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        )}\n\n        {capturedImage && (\n          <div className=\"space-y-3\">\n            <div className=\"relative\">\n              <img \n                src={capturedImage} \n                alt=\"Captured photo\" \n                className=\"w-full h-64 object-cover rounded-xl border border-gray-200 dark:border-gray-800\"\n              />\n              <button \n                onClick={() => setCapturedImage(null)}\n                className=\"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors\"\n              >\n                <X className=\"w-3 h-3\" />\n              </button>\n            </div>\n            \n            <div className=\"flex gap-2\">\n              <button \n                onClick={handleSave}\n                className=\"flex-1 px-4 py-3 rounded-xl bg-primary-600 text-white text-sm hover:bg-primary-700 transition-colors\"\n              >\n                Save Photo\n              </button>\n              <button \n                onClick={() => setCapturedImage(null)}\n                className=\"px-4 py-3 rounded-xl bg-gray-100 dark:bg-gray-800 text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\"\n              >\n                Retake\n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n    </Drawer>\n  );\n}\n\nfunction ScriptsPanel() {\n  const [tab, setTab] = useState(\"opener\");\n  const tabs = [\n    { key: \"opener\", label: \"Openers\" },\n    { key: \"objection\", label: \"Objections\" },\n    { key: \"closer\", label: \"Closers\" },\n    { key: \"sms\", label: \"SMS/WhatsApp\" },\n  ];\n  const items = seedScripts[tab];\n\n  return (\n    <div>\n      <div className=\"grid grid-cols-4 gap-2 mb-3\">\n        {tabs.map(t => (\n          <button \n            key={t.key} \n            onClick={()=>setTab(t.key)} \n            className={`px-3 py-2 rounded-xl text-sm transition-colors ${\n              tab===t.key \n                ? 'bg-primary-600 text-white' \n                : 'bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700'\n            }`}\n          >\n            {t.label}\n          </button>\n        ))}\n      </div>\n      <div className=\"space-y-3\">\n        {items.map(s => (\n          <div key={s.id} className=\"p-3 rounded-2xl border bg-white/70 dark:bg-gray-900/70 border-gray-200 dark:border-gray-800\">\n            <div className=\"text-sm font-medium mb-1\">{s.title}</div>\n            <div className=\"text-sm opacity-90\">{s.content}</div>\n            <div className=\"mt-2 flex gap-2\">\n              <button className=\"px-3 py-1.5 rounded-xl bg-gray-100 dark:bg-gray-800 text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\">\n                Copy\n              </button>\n              <button className=\"px-3 py-1.5 rounded-xl bg-gray-100 dark:bg-gray-800 text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\">\n                Edit\n              </button>\n              <button className=\"px-3 py-1.5 rounded-xl bg-gray-100 dark:bg-gray-800 text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\">\n                Save as new\n              </button>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nfunction LinksPanel({ links }) {\n  const linkRows = [\n    { label: \"Connector sign‚Äëup\", url: links?.connector, icon: Link2 },\n    { label: \"Quote / eligibility form\", url: links?.quote, icon: FileText },\n    { label: \"Book a call\", url: links?.booking, icon: CalendarClock },\n    { label: \"FAQs\", url: links?.faq, icon: FileText },\n  ];\n  \n  return (\n    <div className=\"space-y-2\">\n      {linkRows.map((r, idx) => (\n        <a \n          key={idx} \n          href={r.url} \n          target=\"_blank\" \n          rel=\"noreferrer\" \n          className=\"flex items-center justify-between p-3 rounded-2xl border bg-white/70 dark:bg-gray-900/70 border-gray-200 dark:border-gray-800 hover:border-primary-400 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors\"\n        >\n          <div className=\"flex items-center gap-2 text-sm\">\n            <r.icon className=\"w-4 h-4\"/> {r.label}\n          </div>\n          <ChevronRight className=\"w-4 h-4 opacity-60\"/>\n        </a>\n      ))}\n      <div className=\"text-xs opacity-70\">\n        Tip: add UTM tags to links so scans/visits attribute to this campaign.\n      </div>\n    </div>\n  );\n}\n\nfunction SettingsPanel({ dark, onToggleDark, onExport, onImport, onReset }) {\n  const [selectedFile, setSelectedFile] = useState(null);\n\n  const handleFileSelect = (event) => {\n    const file = event.target.files[0];\n    if (file && file.type === 'application/json') {\n      setSelectedFile(file);\n    } else {\n      alert('Please select a valid JSON file.');\n    }\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"space-y-2\">\n        <h4 className=\"font-medium\">Appearance</h4>\n        <ToggleRow \n          label=\"Dark mode\" \n          value={dark} \n          onChange={onToggleDark} \n        />\n      </div>\n      \n      <div className=\"space-y-2\">\n        <h4 className=\"font-medium\">Data & Privacy</h4>\n        <button className=\"w-full text-left px-3 py-2 rounded-xl bg-gray-100 dark:bg-gray-800 text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors flex items-center gap-2\">\n          <Shield className=\"w-4 h-4\" />\n          Privacy settings\n        </button>\n        <button \n          onClick={onExport}\n          className=\"w-full text-left px-3 py-2 rounded-xl bg-gray-100 dark:bg-gray-800 text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors flex items-center gap-2\"\n        >\n          <Download className=\"w-4 h-4\" />\n          Export all data\n        </button>\n        <button \n          onClick={() => document.getElementById('import-file').click()}\n          className=\"w-full text-left px-3 py-2 rounded-xl bg-gray-100 dark:bg-gray-800 text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors flex items-center gap-2\"\n        >\n          <Upload className=\"w-4 h-4\" />\n          Import data\n        </button>\n        <input\n          id=\"import-file\"\n          type=\"file\"\n          accept=\".json\"\n          onChange={handleFileSelect}\n          style={{ display: 'none' }}\n        />\n        {selectedFile && (\n          <div className=\"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"text-sm\">\n                <div className=\"font-medium\">Selected file: {selectedFile.name}</div>\n                <div className=\"text-xs opacity-70\">Ready to import</div>\n              </div>\n              <div className=\"flex gap-2\">\n                <button \n                  onClick={() => onImport(selectedFile)}\n                  className=\"px-3 py-1 rounded-lg bg-blue-600 text-white text-xs hover:bg-blue-700 transition-colors\"\n                >\n                  Import\n                </button>\n                <button \n                  onClick={() => setSelectedFile(null)}\n                  className=\"px-3 py-1 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-xs hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors\"\n                >\n                  Cancel\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n        <button \n          onClick={onReset}\n          className=\"w-full text-left px-3 py-2 rounded-xl bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors flex items-center gap-2 border border-red-200 dark:border-red-800\"\n        >\n          <Trash2 className=\"w-4 h-4\" />\n          Reset all data\n        </button>\n      </div>\n      \n      <div className=\"space-y-2\">\n        <h4 className=\"font-medium\">Support</h4>\n\n        <button \n          onClick={() => setShowAbout(true)}\n          className=\"w-full text-left px-3 py-2 rounded-xl bg-gray-100 dark:bg-gray-800 text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors flex items-center gap-2\"\n        >\n          <Info className=\"w-4 h-4\" />\n          About\n        </button>\n      </div>\n      \n      <div className=\"pt-4 border-t border-gray-200 dark:border-gray-800\">\n        <button className=\"w-full text-left px-3 py-2 rounded-xl bg-gray-100 dark:bg-gray-800 text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors flex items-center gap-2 text-error-600 dark:text-error-400\">\n          <LogOut className=\"w-4 h-4\" />\n          Sign out\n        </button>\n      </div>\n    </div>\n  );\n}\n\nfunction HelpPanel() {\n  const [expandedSections, setExpandedSections] = useState({\n    quickStart: true, // Start with Quick Start expanded\n    workflow: false,\n    status: false,\n    outcomes: false,\n    tips: false,\n    faq: false\n  });\n\n  const toggleSection = (section) => {\n    setExpandedSections(prev => ({\n      ...prev,\n      [section]: !prev[section]\n    }));\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Quick Start Guide */}\n      <div className=\"border border-gray-200 dark:border-gray-800 rounded-xl overflow-hidden\">\n        <button \n          onClick={() => toggleSection('quickStart')}\n          className=\"w-full p-4 bg-gray-50 dark:bg-gray-900/20 flex items-center justify-between hover:bg-gray-100 dark:hover:bg-gray-900/30 transition-colors\"\n        >\n          <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n            <Target className=\"w-5 h-5\" />\n            Quick Start Guide\n          </h3>\n          <ChevronRight className={`w-5 h-5 transition-transform ${expandedSections.quickStart ? 'rotate-90' : ''}`} />\n        </button>\n        {expandedSections.quickStart && (\n          <div className=\"p-4 space-y-3\">\n            <div className=\"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800\">\n              <div className=\"font-medium text-blue-800 dark:text-blue-200 mb-2\">1. Create Your First Campaign</div>\n              <div className=\"text-blue-700 dark:text-blue-300\">\n                ‚Ä¢ Go to <strong>Campaigns</strong> tab<br/>\n                ‚Ä¢ Click <strong>\"Create New Campaign\"</strong><br/>\n                ‚Ä¢ Enter campaign name, area, and your UW links\n              </div>\n            </div>\n            \n            <div className=\"p-3 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800\">\n              <div className=\"font-medium text-green-800 dark:text-green-200 mb-2\">2. Add Streets & Properties</div>\n              <div className=\"text-green-700 dark:text-green-300\">\n                ‚Ä¢ Go to <strong>Streets</strong> tab<br/>\n                ‚Ä¢ Click <strong>\"Add New Street\"</strong><br/>\n                ‚Ä¢ Enter street name, postcode, and property numbers/names (comma-separated)\n              </div>\n            </div>\n            \n            <div className=\"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-xl border border-purple-200 dark:border-purple-800\">\n              <div className=\"font-medium text-purple-800 dark:text-purple-200 mb-2\">3. Track Your Activity</div>\n              <div className=\"text-purple-700 dark:text-purple-300\">\n                ‚Ä¢ Click on any property number to open it<br/>\n                ‚Ä¢ Mark as <strong>Dropped</strong> (letter delivered)<br/>\n                ‚Ä¢ Mark as <strong>Knocked</strong> (door knocked)<br/>\n                ‚Ä¢ Mark as <strong>Spoke</strong> (conversation had)<br/>\n                ‚Ä¢ Select conversation outcome\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Daily Workflow */}\n      <div className=\"border border-gray-200 dark:border-gray-800 rounded-xl overflow-hidden\">\n        <button \n          onClick={() => toggleSection('workflow')}\n          className=\"w-full p-4 bg-gray-50 dark:bg-gray-900/20 flex items-center justify-between hover:bg-gray-100 dark:hover:bg-gray-900/30 transition-colors\"\n        >\n          <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n            <BarChart3 className=\"w-5 h-5\" />\n            Daily Workflow\n          </h3>\n          <ChevronRight className={`w-5 h-5 transition-transform ${expandedSections.workflow ? 'rotate-90' : ''}`} />\n        </button>\n        {expandedSections.workflow && (\n          <div className=\"p-4 space-y-2 text-sm\">\n            <div className=\"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-900/20 rounded-xl\">\n              <div className=\"w-6 h-6 rounded-full bg-blue-500 text-white text-xs flex items-center justify-center flex-shrink-0 mt-0.5\">1</div>\n              <div>\n                <div className=\"font-medium\">Start Your Day</div>\n                <div className=\"text-gray-600 dark:text-gray-400\">Check the Dashboard for today's follow-ups and review yesterday's activity</div>\n              </div>\n            </div>\n            \n            <div className=\"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-900/20 rounded-xl\">\n              <div className=\"w-6 h-6 rounded-full bg-green-500 text-white text-xs flex items-center justify-center flex-shrink-0 mt-0.5\">2</div>\n              <div>\n                <div className=\"font-medium\">Drop Letters</div>\n                <div className=\"text-gray-600 dark:text-gray-400\">Go to Streets tab, select your target street, and mark properties as \"Dropped\"</div>\n              </div>\n            </div>\n            \n            <div className=\"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-900/20 rounded-xl\">\n              <div className=\"w-6 h-6 rounded-full bg-orange-500 text-white text-xs flex items-center justify-center flex-shrink-0 mt-0.5\">3</div>\n              <div>\n                <div className=\"font-medium\">Follow Up</div>\n                <div className=\"text-gray-600 dark:text-gray-400\">Return to properties where letters were dropped, knock doors, and have conversations</div>\n              </div>\n            </div>\n            \n            <div className=\"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-900/20 rounded-xl\">\n              <div className=\"w-6 h-6 rounded-full bg-purple-500 text-white text-xs flex items-center justify-center flex-shrink-0 mt-0.5\">4</div>\n              <div>\n                <div className=\"font-medium\">Record Outcomes</div>\n                <div className=\"text-gray-600 dark:text-gray-400\">Mark properties as \"Spoke\" and select the appropriate conversation outcome</div>\n              </div>\n            </div>\n            \n            <div className=\"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-900/20 rounded-xl\">\n              <div className=\"w-6 h-6 rounded-full bg-red-500 text-white text-xs flex items-center justify-center flex-shrink-0 mt-0.5\">5</div>\n              <div>\n                <div className=\"font-medium\">Schedule Follow-ups</div>\n                <div className=\"text-gray-600 dark:text-gray-400\">Set reminders for interested prospects and review your daily progress</div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Property Status Guide */}\n      <div className=\"border border-gray-200 dark:border-gray-800 rounded-xl overflow-hidden\">\n        <button \n          onClick={() => toggleSection('status')}\n          className=\"w-full p-4 bg-gray-50 dark:bg-gray-900/20 flex items-center justify-between hover:bg-gray-100 dark:hover:bg-gray-900/30 transition-colors\"\n        >\n          <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n            <Check className=\"w-5 h-5\" />\n            Property Status Guide\n          </h3>\n          <ChevronRight className={`w-5 h-5 transition-transform ${expandedSections.status ? 'rotate-90' : ''}`} />\n        </button>\n        {expandedSections.status && (\n          <div className=\"p-4\">\n            <div className=\"grid md:grid-cols-2 gap-3 text-sm\">\n              <div className=\"p-3 border border-orange-200 dark:border-orange-800 bg-orange-50 dark:bg-orange-900/20 rounded-xl\">\n                <div className=\"font-medium text-orange-800 dark:text-orange-200\">Dropped</div>\n                <div className=\"text-orange-700 dark:text-orange-300\">Letter delivered through letterbox</div>\n              </div>\n              <div className=\"p-3 border border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/20 rounded-xl\">\n                <div className=\"font-medium text-blue-800 dark:text-blue-200\">Knocked</div>\n                <div className=\"text-blue-700 dark:text-blue-300\">Door knocked, no answer or brief interaction</div>\n              </div>\n              <div className=\"p-3 border border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20 rounded-xl\">\n                <div className=\"font-medium text-green-800 dark:text-green-200\">Spoke</div>\n                <div className=\"text-green-700 dark:text-green-300\">Full conversation had with resident</div>\n              </div>\n              <div className=\"p-3 border border-gray-200 dark:border-gray-800 bg-gray-50 dark:bg-gray-900/20 rounded-xl\">\n                <div className=\"font-medium text-gray-800 dark:text-gray-200\">Not Started</div>\n                <div className=\"text-gray-700 dark:text-gray-300\">No activity recorded yet</div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Conversation Outcomes */}\n      <div className=\"border border-gray-200 dark:border-gray-800 rounded-xl overflow-hidden\">\n        <button \n          onClick={() => toggleSection('outcomes')}\n          className=\"w-full p-4 bg-gray-50 dark:bg-gray-900/20 flex items-center justify-between hover:bg-gray-100 dark:hover:bg-gray-900/30 transition-colors\"\n        >\n          <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n            <MessageSquare className=\"w-5 h-5\" />\n            Conversation Outcomes\n          </h3>\n          <ChevronRight className={`w-5 h-5 transition-transform ${expandedSections.outcomes ? 'rotate-90' : ''}`} />\n        </button>\n        {expandedSections.outcomes && (\n          <div className=\"p-4\">\n            <div className=\"grid md:grid-cols-2 gap-3 text-sm\">\n              <div className=\"p-3 border border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20 rounded-xl\">\n                <div className=\"font-medium text-green-800 dark:text-green-200\">Interested</div>\n                <div className=\"text-green-700 dark:text-green-300\">Wants to learn more about UW</div>\n              </div>\n              <div className=\"p-3 border border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20 rounded-xl\">\n                <div className=\"font-medium text-green-800 dark:text-green-200\">Customers Signed</div>\n                <div className=\"text-green-700 dark:text-green-300\">Successfully signed up with UW</div>\n              </div>\n              <div className=\"p-3 border border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20 rounded-xl\">\n                <div className=\"font-medium text-green-800 dark:text-green-200\">Appointment Booked</div>\n                <div className=\"text-green-700 dark:text-green-300\">Meeting scheduled for follow-up</div>\n              </div>\n              <div className=\"p-3 border border-yellow-200 dark:border-yellow-800 bg-yellow-50 dark:bg-yellow-900/20 rounded-xl\">\n                <div className=\"font-medium text-yellow-800 dark:text-yellow-200\">No for Now</div>\n                <div className=\"text-yellow-700 dark:text-yellow-300\">Not interested at this time</div>\n              </div>\n              <div className=\"p-3 border border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/20 rounded-xl\">\n                <div className=\"font-medium text-blue-800 dark:text-blue-200\">Already with UW</div>\n                <div className=\"text-blue-700 dark:text-blue-300\">Customer is already a UW member</div>\n              </div>\n                        <div className=\"p-3 border border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20 rounded-xl\">\n            <div className=\"font-medium text-red-800 dark:text-red-200\">Not Interested</div>\n            <div className=\"text-red-700 dark:text-red-300\">Definitely not interested</div>\n          </div>\n          <div className=\"p-3 border border-gray-200 dark:border-gray-800 bg-gray-50 dark:bg-gray-900/20 rounded-xl\">\n            <div className=\"font-medium text-gray-800 dark:text-gray-200\">Unreachable</div>\n            <div className=\"text-gray-700 dark:text-gray-300\">Unable to contact after multiple attempts</div>\n          </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Tips & Best Practices */}\n      <div className=\"border border-gray-200 dark:border-gray-800 rounded-xl overflow-hidden\">\n        <button \n          onClick={() => toggleSection('tips')}\n          className=\"w-full p-4 bg-gray-50 dark:bg-gray-900/20 flex items-center justify-between hover:bg-gray-100 dark:hover:bg-gray-900/30 transition-colors\"\n        >\n          <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n            <Info className=\"w-5 h-5\" />\n            Tips & Best Practices\n          </h3>\n          <ChevronRight className={`w-5 h-5 transition-transform ${expandedSections.tips ? 'rotate-90' : ''}`} />\n        </button>\n        {expandedSections.tips && (\n          <div className=\"p-4 space-y-2 text-sm\">\n            <div className=\"p-3 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800\">\n              <div className=\"font-medium text-amber-800 dark:text-amber-200 mb-1\">üì± Use Scripts & Links</div>\n              <div className=\"text-amber-700 dark:text-amber-300\">Open the Scripts and Links drawers while on a property for quick access to talking points and UW resources.</div>\n            </div>\n            \n            <div className=\"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800\">\n              <div className=\"font-medium text-blue-800 dark:text-blue-200 mb-1\">üìä Daily Tracking</div>\n              <div className=\"text-blue-700 dark:text-blue-300\">The Dashboard shows only today's activity. Use Reports for overall campaign progress and historical data.</div>\n            </div>\n            \n            <div className=\"p-3 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800\">\n              <div className=\"font-medium text-green-800 dark:text-green-200 mb-1\">üè† Property Names</div>\n              <div className=\"text-green-700 dark:text-green-300\">You can use house names (e.g., \"Birch Tree House\") in addition to numbers. Separate multiple properties with commas.</div>\n            </div>\n            \n            <div className=\"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-xl border border-purple-200 dark:border-purple-800\">\n              <div className=\"font-medium text-purple-800 dark:text-purple-200 mb-1\">üîÑ Status Updates</div>\n              <div className=\"text-purple-700 dark:text-purple-300\">You can toggle statuses on/off if you make a mistake. Click the same button again to remove a status.</div>\n            </div>\n            \n            <div className=\"p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl border border-indigo-200 dark:border-indigo-800\">\n              <div className=\"font-medium text-indigo-800 dark:text-indigo-200 mb-1\">üíæ Data Backup</div>\n              <div className=\"text-indigo-700 dark:text-indigo-300\">Regularly export your data from Settings to keep a backup of your campaigns and progress.</div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* FAQ */}\n      <div className=\"border border-gray-200 dark:border-gray-800 rounded-xl overflow-hidden\">\n        <button \n          onClick={() => toggleSection('faq')}\n          className=\"w-full p-4 bg-gray-50 dark:bg-gray-900/20 flex items-center justify-between hover:bg-gray-100 dark:hover:bg-gray-900/30 transition-colors\"\n        >\n          <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n            <HelpCircle className=\"w-5 h-5\" />\n            Frequently Asked Questions\n          </h3>\n          <ChevronRight className={`w-5 h-5 transition-transform ${expandedSections.faq ? 'rotate-90' : ''}`} />\n        </button>\n        {expandedSections.faq && (\n          <div className=\"p-4 space-y-3 text-sm\">\n            <div className=\"border border-gray-200 dark:border-gray-800 rounded-xl overflow-hidden\">\n              <div className=\"p-3 bg-gray-50 dark:bg-gray-900/20 font-medium\">How do I add a new street to an existing campaign?</div>\n              <div className=\"p-3\">Go to the Streets tab and click \"Add New Street\". Enter the street name, postcode, and property numbers separated by commas.</div>\n            </div>\n            \n            <div className=\"border border-gray-200 dark:border-gray-800 rounded-xl overflow-hidden\">\n              <div className=\"p-3 bg-gray-50 dark:bg-gray-900/20 font-medium\">Can I edit property numbers after creating a street?</div>\n              <div className=\"p-3\">Yes! Click the \"Properties\" button on any street card to open the Property Manager where you can add, remove, or edit individual properties.</div>\n            </div>\n            \n            <div className=\"border border-gray-200 dark:border-gray-800 rounded-xl overflow-hidden\">\n              <div className=\"p-3 bg-gray-50 dark:bg-gray-900/20 font-medium\">What's the difference between Dashboard and Reports?</div>\n              <div className=\"p-3\">Dashboard shows today's activity only, perfect for daily tracking. Reports shows all-time data and campaign overviews.</div>\n            </div>\n            \n            <div className=\"border border-gray-200 dark:border-gray-800 rounded-xl overflow-hidden\">\n              <div className=\"p-3 bg-gray-50 dark:bg-gray-900/20 font-medium\">How do I search and filter campaigns/streets?</div>\n              <div className=\"p-3\">Use the \"Search & Filter\" section in Campaigns and Streets tabs. You can search by name, filter by status, and sort by different criteria.</div>\n            </div>\n            \n            <div className=\"border border-gray-200 dark:border-gray-800 rounded-xl overflow-hidden\">\n              <div className=\"p-3 bg-gray-50 dark:bg-gray-900/20 font-medium\">Can I use this app offline?</div>\n              <div className=\"p-3\">Yes! This is a Progressive Web App (PWA) that works offline. Your data is stored locally on your device.</div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction AboutPanel() {\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"text-center\">\n        <div className=\"w-16 h-16 rounded-2xl bg-purple-600 flex items-center justify-center mx-auto mb-4 shadow-lg\">\n          <span className=\"text-white font-bold text-xl\">UW</span>\n        </div>\n        <h3 className=\"text-lg font-semibold mb-2\">UW Street Smart</h3>\n        <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-4\">\n          Neighbourhood Letters Activity Tracker\n        </p>\n      </div>\n\n      <div className=\"space-y-3 text-sm\">\n        <div className=\"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800\">\n          <div className=\"font-medium text-blue-800 dark:text-blue-200 mb-1\">Version</div>\n          <div className=\"text-blue-700 dark:text-blue-300\">1.0.0</div>\n        </div>\n\n        <div className=\"p-3 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800\">\n          <div className=\"font-medium text-green-800 dark:text-green-200 mb-1\">Built For</div>\n          <div className=\"text-green-700 dark:text-green-300\">UW Partners making a difference in their communities</div>\n        </div>\n\n        <div className=\"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-xl border border-purple-200 dark:border-purple-800\">\n          <div className=\"font-medium text-purple-800 dark:text-purple-200 mb-1\">Features</div>\n          <div className=\"text-purple-700 dark:text-purple-300 space-y-1\">\n            <div>‚Ä¢ Campaign & street management</div>\n            <div>‚Ä¢ Property activity tracking</div>\n            <div>‚Ä¢ Conversation outcomes</div>\n            <div>‚Ä¢ Offline-first PWA</div>\n            <div>‚Ä¢ Daily progress dashboard</div>\n            <div>‚Ä¢ Data export/import</div>\n          </div>\n        </div>\n\n        <div className=\"p-3 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800\">\n          <div className=\"font-medium text-amber-800 dark:text-amber-200 mb-1\">Privacy</div>\n          <div className=\"text-amber-700 dark:text-amber-300\">\n            Your data is stored locally on your device. No personal information is sent to external servers.\n          </div>\n        </div>\n\n        <div className=\"text-center text-xs text-gray-500 dark:text-gray-400 pt-4 border-t border-gray-200 dark:border-gray-800\">\n          Built with React, Vite, and Tailwind CSS<br/>\n          Progressive Web App technology\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction SuccessTipsPanel() {\n  return (\n    <div className=\"space-y-6\">\n      {/* Timing & Strategy */}\n      <div className=\"space-y-3\">\n        <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n          <Clock className=\"w-5 h-5\" />\n          Timing & Strategy\n        </h3>\n        <div className=\"grid md:grid-cols-2 gap-3\">\n          <div className=\"p-4 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800\">\n            <div className=\"font-medium text-green-800 dark:text-green-200 mb-2\">üéØ Best Drop Times</div>\n            <div className=\"text-sm text-green-700 dark:text-green-300 space-y-1\">\n              <div>‚Ä¢ <strong>Evenings:</strong> 6-8pm (people home from work)</div>\n              <div>‚Ä¢ <strong>Weekends:</strong> 10am-2pm (avoid meal times)</div>\n              <div>‚Ä¢ <strong>Avoid:</strong> Monday mornings, Friday evenings</div>\n            </div>\n          </div>\n          \n          <div className=\"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800\">\n            <div className=\"font-medium text-blue-800 dark:text-blue-200 mb-2\">üìù Follow Up Timing</div>\n            <div className=\"text-sm text-blue-700 dark:text-blue-300 space-y-1\">\n              <div>‚Ä¢ <strong>Return:</strong> 2-3 days after dropping letters</div>\n              <div>‚Ä¢ <strong>Best times:</strong> Same as drop times</div>\n              <div>‚Ä¢ <strong>Multiple attempts:</strong> Try 3-4 times before marking as \"No Answer\"</div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Conversation Techniques */}\n      <div className=\"space-y-3\">\n        <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n          <MessageSquare className=\"w-5 h-5\" />\n          Conversation Techniques\n        </h3>\n        <div className=\"space-y-3\">\n          <div className=\"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-xl border border-purple-200 dark:border-purple-800\">\n            <div className=\"font-medium text-purple-800 dark:text-purple-200 mb-2\">üí° Opening Lines</div>\n            <div className=\"text-sm text-purple-700 dark:text-purple-300 space-y-2\">\n              <div><strong>Standard:</strong> \"Hi! I'm [Name] and I'm local. I've been helping neighbours in this area save money on their household bills. I dropped a letter through earlier - have you had a chance to look at it?\"</div>\n              <div><strong>Direct:</strong> \"Hi! I'm helping families in [Area] save money on their bills. I left a letter earlier - would you like me to check if you could save money too?\"</div>\n              <div><strong>Community:</strong> \"Hi! I'm from UW and I've been working with families in this neighbourhood to reduce their bills. Have you seen the letter I dropped through?\"</div>\n            </div>\n          </div>\n          \n          <div className=\"p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800\">\n            <div className=\"font-medium text-amber-800 dark:text-amber-200 mb-2\">üé≠ Handling Objections</div>\n            <div className=\"text-sm text-amber-700 dark:text-amber-300 space-y-2\">\n              <div><strong>\"Not interested\":</strong> \"Totally fine! If things change, the letter has a QR code for a quick checker. No sales calls, just the numbers. Have a great day!\"</div>\n              <div><strong>\"Already with UW\":</strong> \"That's great! You might be eligible for additional savings or better bundles. Would you like me to check your current setup?\"</div>\n              <div><strong>\"Too busy\":</strong> \"I understand! It literally takes 2 minutes to check. If you're not saving money, you're not interested. If you are, we can book a proper time.\"</div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Success Metrics */}\n      <div className=\"space-y-3\">\n        <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n          <BarChart3 className=\"w-5 h-5\" />\n          Success Metrics & Goals\n        </h3>\n        <div className=\"grid md:grid-cols-2 gap-3\">\n          <div className=\"p-4 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl border border-indigo-200 dark:border-indigo-800\">\n            <div className=\"font-medium text-indigo-800 dark:text-indigo-200 mb-2\">üìä Realistic Targets</div>\n            <div className=\"text-sm text-indigo-700 dark:text-indigo-300 space-y-1\">\n              <div>‚Ä¢ <strong>Drop rate:</strong> 50-100 letters per session</div>\n              <div>‚Ä¢ <strong>Conversation rate:</strong> 15-25% of drops</div>\n              <div>‚Ä¢ <strong>Interest rate:</strong> 5-10% of conversations</div>\n              <div>‚Ä¢ <strong>Success rate:</strong> 2-5% of conversations</div>\n            </div>\n          </div>\n          \n          <div className=\"p-4 bg-emerald-50 dark:bg-emerald-900/20 rounded-xl border border-emerald-200 dark:border-emerald-800\">\n            <div className=\"font-medium text-emerald-800 dark:text-emerald-200 mb-2\">üéØ Daily Goals</div>\n            <div className=\"text-sm text-emerald-700 dark:text-emerald-300 space-y-1\">\n              <div>‚Ä¢ <strong>Drop:</strong> 50+ letters</div>\n              <div>‚Ä¢ <strong>Follow up:</strong> 20+ properties</div>\n              <div>‚Ä¢ <strong>Conversations:</strong> 5+ meaningful chats</div>\n              <div>‚Ä¢ <strong>Interested leads:</strong> 1+ per day</div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Best Practices */}\n      <div className=\"space-y-3\">\n        <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n          <Check className=\"w-5 h-5\" />\n          Best Practices\n        </h3>\n        <div className=\"space-y-2\">\n          <div className=\"p-3 bg-gray-50 dark:bg-gray-900/20 rounded-xl border border-gray-200 dark:border-gray-800\">\n            <div className=\"text-sm space-y-1\">\n              <div>‚Ä¢ <strong>Dress appropriately:</strong> Smart casual, UW branded if possible</div>\n              <div>‚Ä¢ <strong>Be confident:</strong> You're offering genuine value, not selling</div>\n              <div>‚Ä¢ <strong>Listen actively:</strong> Understand their situation before suggesting solutions</div>\n              <div>‚Ä¢ <strong>Follow up promptly:</strong> Use the app to track and schedule follow-ups</div>\n              <div>‚Ä¢ <strong>Stay positive:</strong> Every \"no\" gets you closer to a \"yes\"</div>\n              <div>‚Ä¢ <strong>Use the app:</strong> Track everything to improve your approach</div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Common Mistakes */}\n      <div className=\"space-y-3\">\n        <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n          <AlertTriangle className=\"w-5 h-5\" />\n          Common Mistakes to Avoid\n        </h3>\n        <div className=\"space-y-2\">\n          <div className=\"p-3 bg-red-50 dark:bg-red-900/20 rounded-xl border border-red-200 dark:border-red-800\">\n            <div className=\"text-sm space-y-1\">\n              <div>‚Ä¢ <strong>Rushing conversations:</strong> Take time to build rapport</div>\n              <div>‚Ä¢ <strong>Not following up:</strong> Most success comes from follow-up visits</div>\n              <div>‚Ä¢ <strong>Poor timing:</strong> Avoid meal times and early mornings</div>\n              <div>‚Ä¢ <strong>Being pushy:</strong> Respect \"no\" and move on gracefully</div>\n              <div>‚Ä¢ <strong>Not tracking activity:</strong> Use the app to learn what works</div>\n              <div>‚Ä¢ <strong>Giving up too early:</strong> Try multiple times before marking as \"No Answer\"</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction Reports({ campaigns }) {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [statusFilter, setStatusFilter] = useState(\"all\");\n  const [sortColumn, setSortColumn] = useState(\"date\");\n  const [sortDirection, setSortDirection] = useState(\"desc\");\n  const [showFilters, setShowFilters] = useState(false);\n\n  const flat = [];\n  campaigns.forEach(c => c.streets.forEach(s => s.properties.forEach(p => {\n    // Determine the most recent activity timestamp\n    let latestActivity = null;\n    let latestActivityType = '';\n    \n    if (p.spokeAt) {\n      latestActivity = p.spokeAt;\n      latestActivityType = 'spoke';\n    } else if (p.knockedAt) {\n      latestActivity = p.knockedAt;\n      latestActivityType = 'knocked';\n    } else if (p.droppedAt) {\n      latestActivity = p.droppedAt;\n      latestActivityType = 'dropped';\n    } else if (p.resultAt) {\n      latestActivity = p.resultAt;\n      latestActivityType = 'result';\n    }\n    \n    flat.push({ \n      campaign: c.name, \n      street: s.name, \n      property: p.label, \n      dropped: p.dropped, \n      knocked: p.knocked, \n      spoke: p.spoke, \n      result: p.result || 'none', \n      followUpAt: p.followUpAt || '',\n      droppedAt: p.droppedAt || '',\n      knockedAt: p.knockedAt || '',\n      spokeAt: p.spokeAt || '',\n      resultAt: p.resultAt || '',\n      latestActivity: latestActivity,\n      latestActivityType: latestActivityType\n    });\n  })));\n\n  // Filter and sort the data\n  const filteredAndSortedData = useMemo(() => {\n    let filtered = flat.filter(r => {\n      const matchesSearch = \n        r.campaign.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        r.street.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        r.property.toLowerCase().includes(searchTerm.toLowerCase());\n      \n      const matchesStatus = statusFilter === \"all\" || \n        (statusFilter === \"dropped\" && r.dropped) ||\n        (statusFilter === \"knocked\" && r.knocked) ||\n        (statusFilter === \"spoke\" && r.spoke) ||\n        (statusFilter === \"followup\" && r.followUpAt) ||\n        (statusFilter === \"interested\" && (r.result === \"interested\" || r.result === \"customer_signed\" || r.result === \"appointment_booked\"));\n      \n      return matchesSearch && matchesStatus;\n    });\n\n    // Sort the data\n    filtered.sort((a, b) => {\n      let aVal, bVal;\n      \n      switch (sortColumn) {\n        case \"date\":\n          aVal = a.latestActivity || \"\";\n          bVal = b.latestActivity || \"\";\n          break;\n        case \"campaign\":\n          aVal = a.campaign;\n          bVal = b.campaign;\n          break;\n        case \"street\":\n          aVal = a.street;\n          bVal = b.street;\n          break;\n        case \"property\":\n          aVal = parseInt(a.property) || a.property;\n          bVal = parseInt(b.property) || b.property;\n          break;\n        case \"dropped\":\n          aVal = a.dropped ? 1 : 0;\n          bVal = b.dropped ? 1 : 0;\n          break;\n        case \"knocked\":\n          aVal = a.knocked ? 1 : 0;\n          bVal = b.knocked ? 1 : 0;\n          break;\n        case \"spoke\":\n          aVal = a.spoke ? 1 : 0;\n          bVal = b.spoke ? 1 : 0;\n          break;\n        case \"result\":\n          aVal = a.result;\n          bVal = b.result;\n          break;\n        case \"followup\":\n          aVal = a.followUpAt || \"\";\n          bVal = b.followUpAt || \"\";\n          break;\n        default:\n          aVal = a.latestActivity || \"\";\n          bVal = b.latestActivity || \"\";\n      }\n      \n      if (aVal < bVal) return sortDirection === \"asc\" ? -1 : 1;\n      if (aVal > bVal) return sortDirection === \"asc\" ? 1 : -1;\n      return 0;\n    });\n\n    return filtered;\n  }, [flat, searchTerm, statusFilter, sortColumn, sortDirection]);\n\n  const handleSort = (column) => {\n    if (sortColumn === column) {\n      setSortDirection(sortDirection === \"asc\" ? \"desc\" : \"asc\");\n    } else {\n      setSortColumn(column);\n      setSortDirection(\"asc\");\n    }\n  };\n\n  const SortIcon = ({ column }) => {\n    if (sortColumn !== column) {\n      return <ChevronUp className=\"w-3 h-3 opacity-30\" />;\n    }\n    return sortDirection === \"asc\" ? \n      <ChevronUp className=\"w-3 h-3\" /> : \n      <ChevronDown className=\"w-3 h-3\" />;\n  };\n\n  const getSortButtonClass = (column) => {\n    const baseClass = \"flex items-center gap-1 transition-all\";\n    if (sortColumn === column) {\n      return `${baseClass} bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300 px-2 py-1 rounded-lg`;\n    }\n    return `${baseClass} hover:opacity-100 hover:bg-gray-50 dark:hover:bg-gray-900/20 px-2 py-1 rounded-lg`;\n  };\n\n  const totals = useMemo(() => {\n    const t = { \n      letters: 0, \n      knocked: 0, \n      spoke: 0, \n      interested: 0, \n      followups: 0,\n      outcomes: {\n        interested: 0,\n        customer_signed: 0,\n        appointment_booked: 0,\n        no_for_now: 0,\n        already_uw: 0,\n        not_interested: 0\n      }\n    };\n    flat.forEach(r => {\n      if (r.dropped) t.letters++;\n      if (r.knocked) t.knocked++;\n      if (r.spoke) t.spoke++;\n      if (r.result === 'interested' || r.result === 'customer_signed' || r.result === 'appointment_booked') t.interested++;\n      if (r.followUpAt) t.followups++;\n      \n      // Track all outcomes\n      if (r.result && r.result !== 'none') {\n        t.outcomes[r.result] = (t.outcomes[r.result] || 0) + 1;\n      }\n    });\n    return t;\n  }, [campaigns]);\n\n  return (\n    <div className=\"space-y-4\">\n      <SectionCard title=\"Overview\" icon={FileText}>\n        <div className=\"grid md:grid-cols-5 gap-3\">\n          <Stat icon={UploadCloud} label=\"Letters\" value={totals.letters} />\n          <Stat icon={Check} label=\"Knocked\" value={totals.knocked} />\n          <Stat icon={MessageSquare} label=\"Spoke\" value={totals.spoke} />\n          <Stat icon={CheckCircle} label=\"Interested\" value={totals.interested} />\n          <Stat icon={CalendarClock} label=\"Follow‚Äëups\" value={totals.followups} />\n        </div>\n      </SectionCard>\n      \n      <SectionCard title=\"Conversation Outcomes\" icon={MessageSquare}>\n        <div className=\"grid md:grid-cols-2 gap-3\">\n          <div className=\"p-3 rounded-xl bg-green-50 dark:bg-green-900/20 border-2 border-green-500 dark:border-green-500\">\n            <div className=\"text-lg font-semibold text-green-800 dark:text-green-200\">{totals.outcomes.customer_signed}</div>\n            <div className=\"text-sm text-green-700 dark:text-green-300\">Customers Signed</div>\n          </div>\n          <div className=\"p-3 rounded-xl bg-emerald-50 dark:bg-emerald-900/20 border-2 border-emerald-500 dark:border-emerald-500\">\n            <div className=\"text-lg font-semibold text-emerald-800 dark:text-emerald-200\">{totals.outcomes.appointment_booked}</div>\n            <div className=\"text-sm text-emerald-700 dark:text-emerald-300\">Appointment Booked</div>\n          </div>\n          <div className=\"p-3 rounded-xl bg-amber-50 dark:bg-amber-900/20 border-2 border-amber-500 dark:border-amber-500\">\n            <div className=\"text-lg font-semibold text-amber-800 dark:text-amber-200\">{totals.outcomes.no_for_now}</div>\n            <div className=\"text-sm text-amber-700 dark:text-amber-300\">No for Now</div>\n          </div>\n          <div className=\"p-3 rounded-xl bg-sky-50 dark:bg-sky-900/20 border-2 border-sky-500 dark:border-sky-500\">\n            <div className=\"text-lg font-semibold text-sky-800 dark:text-sky-200\">{totals.outcomes.already_uw}</div>\n            <div className=\"text-sm text-sky-700 dark:text-sky-300\">Already with UW</div>\n          </div>\n          <div className=\"p-3 rounded-xl bg-red-50 dark:bg-red-900/20 border-2 border-red-500 dark:border-red-500\">\n            <div className=\"text-lg font-semibold text-red-800 dark:text-red-200\">{totals.outcomes.not_interested}</div>\n            <div className=\"text-sm text-red-700 dark:text-red-300\">Not Interested</div>\n          </div>\n          <div className=\"p-3 rounded-xl bg-slate-50 dark:bg-slate-900/20 border-2 border-slate-500 dark:border-slate-500\">\n            <div className=\"text-lg font-semibold text-slate-800 dark:text-slate-200\">{totals.outcomes.no_answer || 0}</div>\n            <div className=\"text-sm text-slate-700 dark:text-slate-300\">No Answer</div>\n          </div>\n          <div className=\"p-3 rounded-xl bg-purple-50 dark:bg-purple-900/20 border-2 border-purple-500 dark:border-purple-500\">\n            <div className=\"text-lg font-semibold text-purple-800 dark:text-purple-200\">{totals.outcomes.no_cold_callers || 0}</div>\n            <div className=\"text-sm text-purple-700 dark:text-purple-300\">No Cold Callers</div>\n          </div>\n\n        </div>\n      </SectionCard>\n      <SectionCard title=\"Activity log\" icon={ListChecks}>\n        {/* Search and Filter Controls */}\n        <div className=\"mb-4 space-y-3\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"flex-1 relative\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\" />\n              <input \n                type=\"text\" \n                value={searchTerm} \n                onChange={(e) => setSearchTerm(e.target.value)}\n                placeholder=\"Search campaigns, streets, properties...\"\n                className=\"w-full pl-10 pr-3 py-2 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\"\n              />\n            </div>\n            <button \n              onClick={() => setShowFilters(!showFilters)}\n              className={`p-2 rounded-xl border transition-colors ${\n                showFilters \n                  ? 'bg-primary-100 dark:bg-primary-900/20 border-primary-200 dark:border-primary-800 text-primary-600 dark:text-primary-400'\n                  : 'bg-gray-100 dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700'\n              }`}\n              title=\"Toggle filters\"\n            >\n              <Filter className=\"w-4 h-4\" />\n            </button>\n          </div>\n          \n          {showFilters && (\n            <div className=\"p-3 bg-gray-50 dark:bg-gray-900/20 rounded-xl border border-gray-200 dark:border-gray-800\">\n              <div className=\"flex items-center gap-3\">\n                <label className=\"text-xs font-medium opacity-70\">Filter by:</label>\n                <select \n                  value={statusFilter} \n                  onChange={(e) => setStatusFilter(e.target.value)}\n                  className=\"px-3 py-1.5 rounded-lg bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-xs focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\"\n                >\n                  <option value=\"all\">All activities</option>\n                  <option value=\"dropped\">Letters dropped</option>\n                  <option value=\"knocked\">Doors knocked</option>\n                  <option value=\"spoke\">Conversations had</option>\n                  <option value=\"followup\">Follow-ups scheduled</option>\n                  <option value=\"interested\">Interested prospects</option>\n                </select>\n              </div>\n            </div>\n          )}\n          \n          <div className=\"text-xs opacity-70\">\n            Showing {filteredAndSortedData.length} of {flat.length} activities\n            <span className=\"hidden sm:inline\"> ‚Ä¢ Scroll horizontally to see all columns</span>\n            <span className=\"hidden sm:inline\"> ‚Ä¢ <span className=\"text-orange-600 dark:text-orange-400 font-medium\">D</span>=Letters dropped, <span className=\"text-blue-600 dark:text-blue-400 font-medium\">K</span>=Doors knocked, <span className=\"text-green-600 dark:text-green-400 font-medium\">S</span>=Conversations had</span>\n          </div>\n        </div>\n\n        <div className=\"relative\">\n          {/* Scroll indicator - only show on smaller screens */}\n          <div className=\"mb-2 flex justify-end xl:hidden\">\n            <div className=\"flex items-center gap-1 px-2 py-1 bg-gray-100 dark:bg-gray-800 rounded-lg text-xs text-gray-600 dark:text-gray-400 border border-gray-200 dark:border-gray-700\">\n              <svg className=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n              </svg>\n              Scroll for more columns\n            </div>\n          </div>\n          \n          <div className=\"overflow-x-auto border border-gray-200 dark:border-gray-800 rounded-xl\">\n            <table className=\"w-full text-sm min-w-max\">\n              <thead className=\"text-left opacity-70 bg-gray-50 dark:bg-gray-900/20\">\n                <tr>\n                  <th className=\"py-2 px-3 sticky left-0 bg-gray-50 dark:bg-gray-900/20 z-20 border-r border-gray-200 dark:border-gray-700 w-24 shadow-sm\">\n                    <button \n                      onClick={() => handleSort(\"date\")}\n                      className={getSortButtonClass(\"date\")}\n                    >\n                      Date\n                      <SortIcon column=\"date\" />\n                    </button>\n                  </th>\n                <th className=\"py-2 px-3 hidden sm:table-cell w-24\">\n                  <button \n                    onClick={() => handleSort(\"campaign\")}\n                    className={getSortButtonClass(\"campaign\")}\n                  >\n                    Campaign\n                    <SortIcon column=\"campaign\" />\n                  </button>\n                </th>\n                <th className=\"py-2 px-3 hidden md:table-cell w-20\">\n                  <button \n                    onClick={() => handleSort(\"street\")}\n                    className={getSortButtonClass(\"street\")}\n                  >\n                    Street\n                    <SortIcon column=\"street\" />\n                  </button>\n                </th>\n                <th className=\"py-2 px-3 w-12\">\n                  <button \n                    onClick={() => handleSort(\"property\")}\n                    className={getSortButtonClass(\"property\")}\n                  >\n                    #\n                    <SortIcon column=\"property\" />\n                  </button>\n                </th>\n                <th className=\"py-2 px-3 hidden sm:table-cell w-12\">\n                  <button \n                    onClick={() => handleSort(\"dropped\")}\n                    className={getSortButtonClass(\"dropped\")}\n                    title=\"Letters dropped\"\n                  >\n                    D\n                    <SortIcon column=\"dropped\" />\n                  </button>\n                </th>\n                <th className=\"py-2 px-3 hidden sm:table-cell w-12\">\n                  <button \n                    onClick={() => handleSort(\"knocked\")}\n                    className={getSortButtonClass(\"knocked\")}\n                    title=\"Doors knocked\"\n                  >\n                    K\n                    <SortIcon column=\"knocked\" />\n                  </button>\n                </th>\n                <th className=\"py-2 px-3 hidden sm:table-cell w-12\">\n                  <button \n                    onClick={() => handleSort(\"spoke\")}\n                    className={getSortButtonClass(\"spoke\")}\n                    title=\"Conversations had\"\n                  >\n                    S\n                    <SortIcon column=\"spoke\" />\n                  </button>\n                </th>\n                <th className=\"py-2 px-3 w-20\">\n                  <button \n                    onClick={() => handleSort(\"result\")}\n                    className={getSortButtonClass(\"result\")}\n                  >\n                    Result\n                    <SortIcon column=\"result\" />\n                  </button>\n                </th>\n                <th className=\"py-2 px-3 hidden xl:table-cell w-24\">\n                  <button \n                    onClick={() => handleSort(\"followup\")}\n                    className={getSortButtonClass(\"followup\")}\n                  >\n                    Follow‚Äëup\n                    <SortIcon column=\"followup\" />\n                  </button>\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredAndSortedData.map((r, i) => (\n                <tr key={i} className=\"border-t border-gray-200 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-900/20 transition-colors\">\n                  <td className=\"py-2 px-3 sticky left-0 bg-white dark:bg-gray-900 z-20 border-r border-gray-200 dark:border-gray-700 shadow-sm\">\n                    {r.latestActivity ? (\n                      <div className=\"text-xs\">\n                        <div className=\"font-medium\">{new Date(r.latestActivity).toLocaleDateString()}</div>\n                        <div className=\"text-gray-500 dark:text-gray-400 capitalize\">{r.latestActivityType}</div>\n                      </div>\n                    ) : (\n                      <span className=\"text-gray-400 dark:text-gray-600 text-xs\">‚Äî</span>\n                    )}\n                  </td>\n                  <td className=\"py-2 px-3 hidden sm:table-cell font-medium\">{r.campaign}</td>\n                  <td className=\"py-2 px-3 hidden md:table-cell\">{r.street}</td>\n                  <td className=\"py-2 px-3 text-xs max-w-24 truncate\" title={r.property}>{r.property}</td>\n                  <td className=\"py-2 px-3 hidden sm:table-cell\" title={r.dropped ? \"Letter dropped\" : \"No letter dropped\"}>\n                    {r.dropped ? (\n                      <span className=\"inline-flex items-center justify-center w-5 h-5 rounded-full bg-orange-100 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400 text-xs\">\n                        ‚úì\n                      </span>\n                    ) : (\n                      <span className=\"text-gray-400 dark:text-gray-600\">‚Äî</span>\n                    )}\n                  </td>\n                  <td className=\"py-2 px-3 hidden sm:table-cell\" title={r.knocked ? \"Door knocked\" : \"No door knocked\"}>\n                    {r.knocked ? (\n                      <span className=\"inline-flex items-center justify-center w-5 h-5 rounded-full bg-blue-100 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 text-xs\">\n                        ‚úì\n                      </span>\n                    ) : (\n                      <span className=\"text-gray-400 dark:text-gray-600\">‚Äî</span>\n                    )}\n                  </td>\n                  <td className=\"py-2 px-3 hidden sm:table-cell\" title={r.spoke ? \"Conversation had\" : \"No conversation\"}>\n                    {r.spoke ? (\n                      <span className=\"inline-flex items-center justify-center w-5 h-5 rounded-full bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400 text-xs\">\n                        ‚úì\n                      </span>\n                    ) : (\n                      <span className=\"text-gray-400 dark:text-gray-600\">‚Äî</span>\n                    )}\n                  </td>\n                  <td className=\"py-2 px-3\">\n                    {r.result === 'none' ? (\n                      <span className=\"text-gray-500 dark:text-gray-400\">‚Äî</span>\n                    ) : r.result === 'interested' || r.result === 'customer_signed' || r.result === 'appointment_booked' ? (\n                      <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300\">\n                        {r.result.replace('_', ' ')}\n                      </span>\n                    ) : r.result === 'maybe' ? (\n                      <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-300\">\n                        maybe\n                      </span>\n                    ) : r.result === 'no_for_now' ? (\n                      <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 dark:bg-orange-900/20 text-orange-700 dark:text-orange-300\">\n                        no for now\n                      </span>\n                    ) : r.result === 'already_uw' ? (\n                      <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300\">\n                        already UW\n                      </span>\n                    ) : r.result === 'not_interested' ? (\n                      <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300\">\n                        not interested\n                      </span>\n                    ) : r.result === 'no_answer' ? (\n                      <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300\">\n                        no answer\n                      </span>\n                    ) : (\n                      <span className=\"text-gray-600 dark:text-gray-400\">{r.result}</span>\n                    )}\n                  </td>\n                  <td className=\"py-2 px-3 hidden xl:table-cell\">\n                    {r.followUpAt ? (\n                      <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300\">\n                        {new Date(r.followUpAt).toLocaleDateString()}\n                      </span>\n                    ) : (\n                      <span className=\"text-gray-400 dark:text-gray-600\">‚Äî</span>\n                    )}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n        </div>\n      </SectionCard>\n    </div>\n  );\n}\n\n// Form components for creating new campaigns and streets\nfunction NewCampaignForm({ \n  onSubmit, \n  onCancel,\n  addressSearchTerm,\n  setAddressSearchTerm,\n  addressSuggestions,\n  selectedPostcode,\n  selectedTown,\n  availableStreets,\n  selectedStreets,\n  isLoadingAddresses,\n  addressLookupStep,\n  searchAddresses,\n  selectAddress,\n  toggleStreetSelection,\n  importSelectedStreets,\n  resetAddressLookup\n}) {\n  const [formData, setFormData] = useState({\n    name: \"\",\n    area: \"\",\n    connector: \"\",\n    quote: \"\",\n    booking: \"\",\n    faq: \"\"\n  });\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (!formData.name.trim()) {\n      alert('Please enter a campaign name');\n      return;\n    }\n    onSubmit(formData);\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\n      <div>\n        <label className=\"text-xs opacity-70\">Campaign Name *</label>\n        <input \n          type=\"text\" \n          value={formData.name} \n          onChange={e => setFormData(prev => ({ ...prev, name: e.target.value }))}\n          className=\"w-full mt-1 p-2 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\"\n          placeholder=\"e.g., Elmswell NL ‚Äì Aug 2025\"\n          required\n        />\n      </div>\n      \n      <div>\n        <label className=\"text-xs opacity-70\">Postcode Area</label>\n        <input \n          type=\"text\" \n          value={formData.area} \n          onChange={e => setFormData(prev => ({ ...prev, area: e.target.value }))}\n          className=\"w-full mt-1 p-2 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\"\n          placeholder=\"e.g., IP30\"\n        />\n      </div>\n\n      <div className=\"space-y-2\">\n        <label className=\"text-xs opacity-70\">Campaign Links (Optional)</label>\n        <input \n          type=\"url\" \n          value={formData.connector} \n          onChange={e => setFormData(prev => ({ ...prev, connector: e.target.value }))}\n          className=\"w-full p-2 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\"\n          placeholder=\"Connector sign-up URL\"\n        />\n        <input \n          type=\"url\" \n          value={formData.quote} \n          onChange={e => setFormData(prev => ({ ...prev, quote: e.target.value }))}\n          className=\"w-full p-2 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\"\n          placeholder=\"Quote/eligibility form URL\"\n        />\n        <input \n          type=\"url\" \n          value={formData.booking} \n          onChange={e => setFormData(prev => ({ ...prev, booking: e.target.value }))}\n          className=\"w-full p-2 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\"\n          placeholder=\"Booking page URL\"\n        />\n        <input \n          type=\"url\" \n          value={formData.faq} \n          onChange={e => setFormData(prev => ({ ...prev, faq: e.target.value }))}\n          className=\"w-full p-2 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\"\n          placeholder=\"FAQ page URL\"\n        />\n      </div>\n\n      {/* Address Lookup Section */}\n      <div className=\"border-t border-gray-200 dark:border-gray-800 pt-4\">\n        <div className=\"flex items-center gap-2 mb-3\">\n          <MapPin className=\"w-4 h-4 text-primary-600\" />\n          <label className=\"text-sm font-medium\">Import Streets</label>\n        </div>\n        <p className=\"text-xs opacity-70 mb-3\">Search by postcode or town name to import streets automatically</p>\n        \n        {/* Step 1: Search */}\n        {addressLookupStep === \"search\" && (\n          <div className=\"space-y-3\">\n            <div className=\"relative\">\n              <input \n                type=\"text\" \n                value={addressSearchTerm} \n                onChange={e => {\n                  setAddressSearchTerm(e.target.value);\n                  if (e.target.value.length >= 3) {\n                    searchAddresses(e.target.value);\n                  } else {\n                    setAddressSuggestions([]);\n                  }\n                }}\n                className=\"w-full p-2 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\"\n                placeholder=\"Enter postcode or town name (e.g., IP30 or Elmswell)\"\n              />\n              {isLoadingAddresses && (\n                <div className=\"absolute right-3 top-2.5\">\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600\"></div>\n                </div>\n              )}\n            </div>\n            \n            {/* Suggestions */}\n            {addressSuggestions.length > 0 && (\n              <div className=\"max-h-32 overflow-y-auto border border-gray-200 dark:border-gray-800 rounded-lg\">\n                {addressSuggestions.map((suggestion, index) => (\n                  <button\n                    key={index}\n                    onClick={() => selectAddress(suggestion)}\n                    className=\"w-full p-2 text-left text-sm hover:bg-gray-50 dark:hover:bg-gray-800 border-b border-gray-100 dark:border-gray-700 last:border-b-0\"\n                  >\n                    {typeof suggestion === 'string' ? suggestion : suggestion.display}\n                  </button>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Step 2: Select Streets */}\n        {addressLookupStep === \"select\" && (\n          <div className=\"space-y-3\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium\">{selectedTown}</p>\n                <p className=\"text-xs opacity-70\">{selectedPostcode}</p>\n              </div>\n              <button\n                onClick={resetAddressLookup}\n                className=\"text-xs text-gray-500 hover:text-gray-700 dark:hover:text-gray-300\"\n              >\n                Change\n              </button>\n            </div>\n            \n            <div className=\"max-h-32 overflow-y-auto border border-gray-200 dark:border-gray-800 rounded-lg\">\n              {availableStreets.map((street, index) => (\n                <label key={index} className=\"flex items-center p-2 hover:bg-gray-50 dark:hover:bg-gray-800 border-b border-gray-100 dark:border-gray-700 last:border-b-0\">\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedStreets.includes(street)}\n                    onChange={() => toggleStreetSelection(street)}\n                    className=\"mr-2\"\n                  />\n                  <span className=\"text-sm\">{street}</span>\n                </label>\n              ))}\n            </div>\n            \n            {selectedStreets.length > 0 && (\n              <button\n                onClick={importSelectedStreets}\n                className=\"w-full px-3 py-2 rounded-lg bg-primary-600 text-white text-sm hover:bg-primary-700 transition-colors\"\n              >\n                Import {selectedStreets.length} Street{selectedStreets.length !== 1 ? 's' : ''}\n              </button>\n            )}\n          </div>\n        )}\n      </div>\n\n      <div className=\"flex gap-3\">\n        <button \n          type=\"submit\"\n          className=\"flex-1 px-4 py-2 rounded-xl bg-primary-600 text-white text-sm hover:bg-primary-700 transition-colors\"\n        >\n          Create Campaign\n        </button>\n        <button \n          type=\"button\"\n          onClick={onCancel}\n          className=\"flex-1 px-4 py-2 rounded-xl bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\"\n        >\n          Cancel\n        </button>\n      </div>\n    </form>\n  );\n}\n\nfunction ImportStreetsForm({ \n  onCancel,\n  addressSearchTerm,\n  setAddressSearchTerm,\n  addressSuggestions,\n  selectedPostcode,\n  selectedTown,\n  availableStreets,\n  selectedStreets,\n  isLoadingAddresses,\n  addressLookupStep,\n  searchAddresses,\n  selectAddress,\n  toggleStreetSelection,\n  importSelectedStreets,\n  resetAddressLookup\n}) {\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"border-b border-gray-200 dark:border-gray-800 pb-4\">\n        <div className=\"flex items-center gap-2 mb-3\">\n          <MapPin className=\"w-4 h-4 text-primary-600\" />\n          <label className=\"text-sm font-medium\">Import Streets</label>\n        </div>\n        <p className=\"text-xs opacity-70\">Search by postcode or town name to import streets automatically</p>\n      </div>\n      \n      {/* Step 1: Search */}\n      {addressLookupStep === \"search\" && (\n        <div className=\"space-y-3\">\n          <div className=\"relative\">\n            <input \n              type=\"text\" \n              value={addressSearchTerm} \n              onChange={e => {\n                setAddressSearchTerm(e.target.value);\n                if (e.target.value.length >= 3) {\n                  searchAddresses(e.target.value);\n                } else {\n                  setAddressSuggestions([]);\n                }\n              }}\n              className=\"w-full p-2 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\"\n              placeholder=\"Enter postcode or town name (e.g., IP30 or Elmswell)\"\n            />\n            {isLoadingAddresses && (\n              <div className=\"absolute right-3 top-2.5\">\n                <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600\"></div>\n              </div>\n            )}\n          </div>\n          \n          {/* Suggestions */}\n          {addressSuggestions.length > 0 && (\n            <div className=\"max-h-32 overflow-y-auto border border-gray-200 dark:border-gray-800 rounded-lg\">\n              {addressSuggestions.map((suggestion, index) => (\n                <button\n                  key={index}\n                  onClick={() => selectAddress(suggestion)}\n                  className=\"w-full p-2 text-left text-sm hover:bg-gray-50 dark:hover:bg-gray-800 border-b border-gray-100 dark:border-gray-700 last:border-b-0\"\n                >\n                  {typeof suggestion === 'string' ? suggestion : suggestion.display}\n                </button>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Step 2: Select Streets */}\n      {addressLookupStep === \"select\" && (\n        <div className=\"space-y-3\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm font-medium\">{selectedTown}</p>\n              <p className=\"text-xs opacity-70\">{selectedPostcode}</p>\n            </div>\n            <button\n              onClick={resetAddressLookup}\n              className=\"text-xs text-gray-500 hover:text-gray-700 dark:hover:text-gray-300\"\n            >\n              Change\n            </button>\n          </div>\n          \n          <div className=\"max-h-32 overflow-y-auto border border-gray-200 dark:border-gray-800 rounded-lg\">\n            {availableStreets.map((street, index) => (\n              <label key={index} className=\"flex items-center p-2 hover:bg-gray-50 dark:hover:bg-gray-800 border-b border-gray-100 dark:border-gray-700 last:border-b-0\">\n                <input\n                  type=\"checkbox\"\n                  checked={selectedStreets.includes(street)}\n                  onChange={() => toggleStreetSelection(street)}\n                  className=\"mr-2\"\n                />\n                <span className=\"text-sm\">{street}</span>\n              </label>\n            ))}\n          </div>\n          \n          {selectedStreets.length > 0 && (\n            <button\n              onClick={importSelectedStreets}\n              className=\"w-full px-3 py-2 rounded-lg bg-primary-600 text-white text-sm hover:bg-primary-700 transition-colors\"\n            >\n              Import {selectedStreets.length} Street{selectedStreets.length !== 1 ? 's' : ''}\n            </button>\n          )}\n        </div>\n      )}\n\n      <div className=\"flex gap-3 pt-4\">\n        <button \n          type=\"button\"\n          onClick={onCancel}\n          className=\"flex-1 px-4 py-2 rounded-xl bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\"\n        >\n          Close\n        </button>\n      </div>\n    </div>\n  );\n}\n\nfunction NewStreetForm({ onSubmit, onCancel }) {\n  const [formData, setFormData] = useState({\n    name: \"\",\n    postcode: \"\",\n    properties: \"\"\n  });\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (!formData.name.trim()) {\n      alert('Please enter a street name');\n      return;\n    }\n    if (!formData.properties.trim()) {\n      alert('Please enter property numbers');\n      return;\n    }\n\n    // Parse property numbers and names (comma separated only)\n    const propertyList = formData.properties\n      .split(',')\n      .map(p => p.trim())\n      .filter(p => p.length > 0);\n\n    if (propertyList.length === 0) {\n      alert('Please enter at least one property number');\n      return;\n    }\n\n    onSubmit({\n      name: formData.name,\n      postcode: formData.postcode,\n      properties: propertyList\n    });\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\n      <div>\n        <label className=\"text-xs opacity-70\">Street Name *</label>\n        <input \n          type=\"text\" \n          value={formData.name} \n          onChange={e => setFormData(prev => ({ ...prev, name: e.target.value }))}\n          className=\"w-full mt-1 p-2 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\"\n          placeholder=\"e.g., Orchard Way\"\n          required\n        />\n      </div>\n      \n      <div>\n        <label className=\"text-xs opacity-70\">Postcode</label>\n        <input \n          type=\"text\" \n          value={formData.postcode} \n          onChange={e => setFormData(prev => ({ ...prev, postcode: e.target.value }))}\n          className=\"w-full mt-1 p-2 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\"\n          placeholder=\"e.g., IP30 9XX\"\n        />\n      </div>\n\n      <div>\n        <label className=\"text-xs opacity-70\">Property Numbers *</label>\n        <textarea \n          value={formData.properties} \n          onChange={e => setFormData(prev => ({ ...prev, properties: e.target.value }))}\n          className=\"w-full mt-1 p-2 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\"\n          placeholder=\"Enter property numbers or names separated by commas&#10;e.g., 1, 3, 5, 7, 9&#10;or: 12, 14, 16, 18&#10;or: The Old Post Office, Rose Cottage, 1, 3\"\n          rows={3}\n          required\n        />\n        <div className=\"text-xs text-gray-500 mt-1\">\n          Separate property numbers or names with commas only. Supports house names like \"The Old Post Office\", \"Rose Cottage\"\n        </div>\n      </div>\n\n      <div className=\"flex gap-3\">\n        <button \n          type=\"submit\"\n          className=\"flex-1 px-4 py-2 rounded-xl bg-primary-600 text-white text-sm hover:bg-primary-700 transition-colors\"\n        >\n          Add Street\n        </button>\n        <button \n          type=\"button\"\n          onClick={onCancel}\n          className=\"flex-1 px-4 py-2 rounded-xl bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\"\n        >\n          Cancel\n        </button>\n      </div>\n    </form>\n  );\n}\n\n// Edit Campaign Form\nfunction EditCampaignForm({ campaign, onSubmit, onCancel }) {\n  const [formData, setFormData] = useState({\n    name: campaign.name,\n    area: campaign.area,\n    connector: campaign.links.connector,\n    quote: campaign.links.quote,\n    booking: campaign.links.booking,\n    faq: campaign.links.faq\n  });\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (!formData.name.trim()) {\n      alert('Please enter a campaign name');\n      return;\n    }\n    onSubmit(formData);\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\n      <div>\n        <label className=\"text-xs opacity-70\">Campaign Name *</label>\n        <input \n          type=\"text\" \n          value={formData.name} \n          onChange={e => setFormData(prev => ({ ...prev, name: e.target.value }))}\n          className=\"w-full mt-1 p-2 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\"\n          placeholder=\"e.g., Elmswell NL ‚Äì Aug 2025\"\n          required\n        />\n      </div>\n      \n      <div>\n        <label className=\"text-xs opacity-70\">Postcode Area</label>\n        <input \n          type=\"text\" \n          value={formData.area} \n          onChange={e => setFormData(prev => ({ ...prev, area: e.target.value }))}\n          className=\"w-full mt-1 p-2 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\"\n          placeholder=\"e.g., IP30\"\n        />\n      </div>\n\n      <div className=\"space-y-2\">\n        <label className=\"text-xs opacity-70\">Campaign Links (Optional)</label>\n        <input \n          type=\"url\" \n          value={formData.connector} \n          onChange={e => setFormData(prev => ({ ...prev, connector: e.target.value }))}\n          className=\"w-full p-2 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\"\n          placeholder=\"Connector sign-up URL\"\n        />\n        <input \n          type=\"url\" \n          value={formData.quote} \n          onChange={e => setFormData(prev => ({ ...prev, quote: e.target.value }))}\n          className=\"w-full p-2 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\"\n          placeholder=\"Quote/eligibility form URL\"\n        />\n        <input \n          type=\"url\" \n          value={formData.booking} \n          onChange={e => setFormData(prev => ({ ...prev, booking: e.target.value }))}\n          className=\"w-full p-2 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\"\n          placeholder=\"Booking page URL\"\n        />\n        <input \n          type=\"url\" \n          value={formData.faq} \n          onChange={e => setFormData(prev => ({ ...prev, faq: e.target.value }))}\n          className=\"w-full p-2 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\"\n          placeholder=\"FAQ page URL\"\n        />\n      </div>\n\n      <div className=\"flex gap-3\">\n        <button \n          type=\"submit\"\n          className=\"flex-1 px-4 py-2 rounded-xl bg-primary-600 text-white text-sm hover:bg-primary-700 transition-colors\"\n        >\n          Update Campaign\n        </button>\n        <button \n          type=\"button\"\n          onClick={onCancel}\n          className=\"flex-1 px-4 py-2 rounded-xl bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\"\n        >\n          Cancel\n        </button>\n      </div>\n    </form>\n  );\n}\n\n// Edit Street Form\nfunction EditStreetForm({ street, onSubmit, onCancel }) {\n  const [formData, setFormData] = useState({\n    name: street.name,\n    postcode: street.postcode\n  });\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (!formData.name.trim()) {\n      alert('Please enter a street name');\n      return;\n    }\n    onSubmit(formData);\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\n      <div>\n        <label className=\"text-xs opacity-70\">Street Name *</label>\n        <input \n          type=\"text\" \n          value={formData.name} \n          onChange={e => setFormData(prev => ({ ...prev, name: e.target.value }))}\n          className=\"w-full mt-1 p-2 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\"\n          placeholder=\"e.g., Orchard Way\"\n          required\n        />\n      </div>\n      \n      <div>\n        <label className=\"text-xs opacity-70\">Postcode</label>\n        <input \n          type=\"text\" \n          value={formData.postcode} \n          onChange={e => setFormData(prev => ({ ...prev, postcode: e.target.value }))}\n          className=\"w-full mt-1 p-2 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\"\n          placeholder=\"e.g., IP30 9XX\"\n        />\n      </div>\n\n      <div className=\"flex gap-3\">\n        <button \n          type=\"submit\"\n          className=\"flex-1 px-4 py-2 rounded-xl bg-primary-600 text-white text-sm hover:bg-primary-700 transition-colors\"\n        >\n          Update Street\n        </button>\n        <button \n          type=\"button\"\n          onClick={onCancel}\n          className=\"flex-1 px-4 py-2 rounded-xl bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\"\n        >\n          Cancel\n        </button>\n      </div>\n    </form>\n  );\n}\n\n// Property Manager Component\nfunction PropertyManager({ street, onAddProperty, onRemoveProperty, onEditProperty, onClose }) {\n  const [newPropertyLabel, setNewPropertyLabel] = useState(\"\");\n  const [editingProperty, setEditingProperty] = useState(null);\n  const [editLabel, setEditLabel] = useState(\"\");\n\n  const handleAddProperty = (e) => {\n    e.preventDefault();\n    if (!newPropertyLabel.trim()) {\n      alert('Please enter a property label');\n      return;\n    }\n    \n    // Parse comma-separated property labels\n    const propertyLabels = newPropertyLabel\n      .split(',')\n      .map(label => label.trim())\n      .filter(label => label.length > 0);\n    \n    if (propertyLabels.length === 0) {\n      alert('Please enter at least one property label');\n      return;\n    }\n    \n    // Add each property\n    propertyLabels.forEach(label => {\n      onAddProperty(label);\n    });\n    \n    setNewPropertyLabel(\"\");\n  };\n\n  const handleEditProperty = (propertyId, newLabel) => {\n    if (!newLabel.trim()) {\n      alert('Please enter a property label');\n      return;\n    }\n    onEditProperty(propertyId, newLabel.trim());\n    setEditingProperty(null);\n    setEditLabel(\"\");\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <div>\n        <h4 className=\"text-sm font-medium mb-2\">Add New Property</h4>\n        <form onSubmit={handleAddProperty} className=\"flex gap-2\">\n          <input \n            type=\"text\" \n            value={newPropertyLabel} \n            onChange={e => setNewPropertyLabel(e.target.value)}\n            className=\"flex-1 p-2 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm focus:border-primary-400 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/20 transition-colors\"\n            placeholder=\"Property numbers or names (e.g., 1, 3, 5 or The Old Post Office, Rose Cottage)\"\n          />\n          <button \n            type=\"submit\"\n            className=\"px-4 py-2 rounded-xl bg-primary-600 text-white text-sm hover:bg-primary-700 transition-colors\"\n          >\n            Add\n          </button>\n        </form>\n        <div className=\"text-xs text-gray-500 mt-1\">\n          Separate multiple properties with commas: \"1, 3, 5\" or \"The Old Post Office, Rose Cottage\"\n        </div>\n      </div>\n\n      <div>\n        <h4 className=\"text-sm font-medium mb-2\">Existing Properties ({street.properties.length})</h4>\n        <div className=\"space-y-2 max-h-60 overflow-y-auto\">\n          {street.properties.map(property => (\n            <div key={property.id} className=\"flex items-center justify-between p-2 rounded-lg bg-gray-50 dark:bg-gray-800\">\n              {editingProperty === property.id ? (\n                <div className=\"flex items-center gap-2 flex-1\">\n                  <input \n                    type=\"text\" \n                    value={editLabel} \n                    onChange={e => setEditLabel(e.target.value)}\n                    className=\"flex-1 p-1 rounded bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-sm\"\n                    autoFocus\n                  />\n                  <button \n                    onClick={() => handleEditProperty(property.id, editLabel)}\n                    className=\"px-2 py-1 rounded bg-green-600 text-white text-xs hover:bg-green-700\"\n                  >\n                    Save\n                  </button>\n                  <button \n                    onClick={() => {\n                      setEditingProperty(null);\n                      setEditLabel(\"\");\n                    }}\n                    className=\"px-2 py-1 rounded bg-gray-600 text-white text-xs hover:bg-gray-700\"\n                  >\n                    Cancel\n                  </button>\n                </div>\n              ) : (\n                <>\n                  <span className=\"text-sm\">{property.label}</span>\n                  <div className=\"flex items-center gap-1\">\n                    <button \n                      onClick={() => {\n                        setEditingProperty(property.id);\n                        setEditLabel(property.label);\n                      }}\n                      className=\"px-2 py-1 rounded bg-blue-600 text-white text-xs hover:bg-blue-700\"\n                    >\n                      Edit\n                    </button>\n                    <button \n                      onClick={() => onRemoveProperty(property.id)}\n                      className=\"px-2 py-1 rounded bg-red-600 text-white text-xs hover:bg-red-700\"\n                    >\n                      Remove\n                    </button>\n                  </div>\n                </>\n              )}\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"flex gap-3 pt-4 border-t border-gray-200 dark:border-gray-800\">\n        <button \n          onClick={onClose}\n          className=\"flex-1 px-4 py-2 rounded-xl bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\"\n        >\n          Close\n        </button>\n      </div>\n    </div>\n  );\n}","import React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport App from './App.jsx'\nimport './styles/index.css'\n\nReactDOM.createRoot(document.getElementById('root')).render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n) "],"names":["f","require$$0","k","l","m","n","p","q","c","a","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","client","seedScripts","seedCampaigns","Chip","children","variant","className","variants","jsx","SectionCard","title","Icon","actions","jsxs","Drawer","open","onClose","size","sizes","AnimatePresence","motion","X","App","dark","setDark","useState","view","setView","campaigns","setCampaigns","activeCampaignId","setActiveCampaignId","activeStreetId","setActiveStreetId","activePropertyId","setActivePropertyId","showScripts","setShowScripts","showLinks","setShowLinks","showSettings","setShowSettings","showImportModal","setShowImportModal","showResetModal","setShowResetModal","showNewCampaignModal","setShowNewCampaignModal","showNewStreetModal","setShowNewStreetModal","showImportStreetsModal","setShowImportStreetsModal","showEditCampaignModal","setShowEditCampaignModal","showEditStreetModal","setShowEditStreetModal","showPropertyManagerModal","setShowPropertyManagerModal","editingCampaign","setEditingCampaign","editingStreet","setEditingStreet","showHelp","setShowHelp","showAbout","setShowAbout","showSuccessTips","setShowSuccessTips","isOnline","setIsOnline","addressSearchTerm","setAddressSearchTerm","addressSuggestions","setAddressSuggestions","selectedPostcode","setSelectedPostcode","selectedTown","setSelectedTown","availableStreets","setAvailableStreets","selectedStreets","setSelectedStreets","isLoadingAddresses","setIsLoadingAddresses","addressLookupStep","setAddressLookupStep","activeCampaign","useMemo","activeStreet","s","activeProperty","stats","letters","convos","interested","followups","outcomes","today","droppedToday","spokeToday","resultToday","followUpToday","setProperty","updates","prev","updatedCampaign","newUpdates","totalProperties","total","street","newStatus","handledProperties","updatedStreets","streetTotalProperties","streetDroppedProperties","streetStatus","streetHandledProperties","toggleDark","exportData","data","blob","url","importData","file","reader","_a","resetData","confirmReset","emptyCampaigns","createNewCampaign","campaignData","newCampaign","createNewStreet","streetData","newStreet","prop","index","editCampaign","deleteCampaign","campaignId","remainingCampaigns","editStreet","deleteStreet","streetId","remainingStreets","addProperty","propertyLabel","newProperty","updatedStreet","removeProperty","propertyId","editPropertyLabel","newLabel","togglePropertyStatus","status","newValue","timestampKey","searchAddresses","searchTerm","response","formattedSuggestions","item","error","selectAddress","suggestion","postcode","streetsResponse","streets","toggleStreetSelection","importSelectedStreets","newStreets","streetName","resetAddressLookup","useEffect","handleOnline","handleOffline","Clock","Database","Sun","Moon","HelpCircle","Settings","NavButton","BarChart3","Target","MapPin","FileText","FolderOpen","Share2","MessageSquare","Link2","Dashboard","Campaigns","id","campaign","property","Streets","propId","PropertyView","Reports","ScriptsPanel","LinksPanel","SettingsPanel","HelpPanel","AboutPanel","SuccessTipsPanel","AlertTriangle","NewCampaignForm","NewStreetForm","ImportStreetsForm","EditCampaignForm","EditStreetForm","PropertyManager","icon","label","active","onClick","Stat","value","sub","onGoStreets","hasData","Plus","Home","ChevronRight","UploadCloud","CheckCircle","CalendarClock","activeId","onSelect","onCreateNew","onEdit","onDelete","onToggleComplete","setSearchTerm","statusFilter","setStatusFilter","sortBy","setSortBy","showFilters","setShowFilters","filteredCampaigns","filtered","matchesSearch","matchesStatus","Search","onSelectStreet","onOpenProperty","onAddStreet","onEditStreet","onDeleteStreet","onManageProperties","onImportStreets","filteredStreets","buttonStyle","ToggleRow","onChange","onBack","onUpdate","onShowScripts","onShowLinks","onToggleStatus","showFollowUp","setShowFollowUp","showPhotoModal","setShowPhotoModal","notes","setNotes","ActionButton","Check","OutcomeButton","Upload","FollowUpModal","dt","PhotoModal","photoData","current","isActive","variantStyles","onSave","date","setDate","time","setTime","capturedImage","setCapturedImage","isCapturing","setIsCapturing","fileInputRef","useRef","handleFileSelect","event","startCamera","stream","video","container","capturePhoto","canvas","track","handleSave","handleClose","Camera","tab","setTab","tabs","items","t","links","linkRows","r","idx","onToggleDark","onExport","onImport","onReset","selectedFile","setSelectedFile","Shield","Download","Trash2","Info","LogOut","expandedSections","setExpandedSections","toggleSection","section","sortColumn","setSortColumn","sortDirection","setSortDirection","flat","latestActivity","latestActivityType","filteredAndSortedData","aVal","bVal","handleSort","column","SortIcon","ChevronUp","ChevronDown","getSortButtonClass","baseClass","totals","ListChecks","Filter","i","onSubmit","onCancel","formData","setFormData","handleSubmit","propertyList","onAddProperty","onRemoveProperty","onEditProperty","newPropertyLabel","setNewPropertyLabel","editingProperty","setEditingProperty","editLabel","setEditLabel","handleAddProperty","propertyLabels","handleEditProperty","Fragment","ReactDOM","React"],"mappings":"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","x_google_ignoreList":[0,1,2]}